(()=>{var e,t,i,n,r={766:(e,t,i)=>{i.d(t,{p:()=>ne,B:()=>re});var n=i(709),r=i(720),s=i(232),o=i(618);const a=(0,o.LI)(o.CJ);class l extends o.r{buffer=null;pipeline=null;constructor(e){super(),this.device=e}init(){const e=n.ef(this.device,{code:"#version 300 es\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec4 color;\nout vec4 vColor;\nvoid main () {\n  gl_Position = vec4(position, 1);\n  vColor = color;\n}\n",usage:r.$X.Vertex}),t=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nin vec4 vColor;\nout vec4 outColor;\nvoid main () {\n  outColor = vColor;\n}\n",usage:r.$X.Fragment});this.buffer=(0,o.gS)(this.device,a),this.pipeline=n.F0(this.device,{vertex:e,fragment:t,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x4]}])}),this.register([this.buffer,this.pipeline,e,t])}render(e){return n.pJ(this.device,{clearColor:[.1,.2,.3,1]}),n.rh(this.device,this.pipeline),n.pk(this.device,0,this.buffer),n.ii(this.device,3),n.X$(this.device),!1}}const c=(0,o.MA)([0,1,2]),u=(0,o.om)([0,-.05,-.05,0,.05,.05]),d=new Float32Array(500),f=new Float32Array(100);for(let e=0;e<100;e++){f[e]=Math.random()*(2*Math.PI),d[5*e]=2*Math.floor(e/10)/10-1+.1,d[5*e+1]=e%10*2/10-1+.1;const t=Math.floor(e/10)/10,i=e%10/10,n=t*i+.2;d[5*e+2]=t,d[5*e+3]=i,d[5*e+4]=n}class h extends o.r{pipeline=null;indexBuffer=null;position=null;offsetColor=null;angle=null;bindGroup=null;ambient=null;ambientData=new Float32Array(4);t=0;constructor(e){super(),this.device=e}init(){const e=n.ef(this.device,{code:"#version 300 es\nlayout (location=0) in vec2 position;\nlayout (location=1) in vec2 offset;\nlayout (location=2) in vec3 color;\nlayout (location=3) in float angle;\nout vec3 vColor;\nvoid main() {\n  gl_Position = vec4(\n    cos(angle) * position.x + sin(angle) * position.y + offset.x,\n    -sin(angle) * position.x + cos(angle) * position.y + offset.y,\n    0, 1);\n  vColor = color;\n}\n",usage:r.$X.Vertex}),t=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  vec3 ambient;\n};\nin vec3 vColor;\nout vec4 outColor;\nvoid main () {\n  outColor = vec4(ambient + vColor, 1.0);\n}\n",usage:r.$X.Fragment});this.indexBuffer=(0,o.gS)(this.device,c,r.FB.Index),this.position=(0,o.gS)(this.device,u),this.offsetColor=(0,o.gS)(this.device,d),this.angle=(0,o.gS)(this.device,f,r.FB.Vertex|r.FB.Stream),this.ambient=(0,o.gS)(this.device,this.ambientData,r.FB.Uniform|r.FB.Stream);const i=n.mM(this.device,{entries:[{label:"Data",type:r.$l.Buffer}]});this.bindGroup=n.J3(this.device,{layout:i,entries:[{buffer:this.ambient}]}),this.pipeline=n.F0(this.device,{vertex:e,fragment:t,buffers:(0,s.O5)([{attributes:[r.gB.F32x2]},{attributes:[r.gB.F32x2,r.gB.F32x3],instanced:!0},{attributes:[r.gB.F32],instanced:!0}]),bindGroups:[i]}),this.register([this.bindGroup,this.indexBuffer,this.position,this.offsetColor,this.angle,this.pipeline,e,t,i])}render(e){for(let t=0;t<100;t++)f[t]+=this.t-e-2*Math.PI*Math.floor(f[t]/Math.PI/2);this.t=e,n.F3(this.device,this.angle,f);const t=Math.sin(e)/2;return this.ambientData[0]=this.ambientData[1]=this.ambientData[2]=t,n.F3(this.device,this.ambient,this.ambientData),n.pJ(this.device,{clearColor:[0,0,0,1]}),n.rh(this.device,this.pipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.position),n.pk(this.device,1,this.offsetColor),n.pk(this.device,2,this.angle),n.yY(this.device,0,this.bindGroup),n.sO(this.device,3,100),n.X$(this.device),!0}}const p=new Array(16);function g(e,t,i=0,n=0,r=e.length-i){for(let s=0;s<r;++s)t[n+s]=e[i+s];return t}function v(e=0,t=0,i=0,n=0){return[e,t,i,n]}function m(e=0,t=0,i=0){return[e,t,i]}function b(e,t){return function(e,t){let i=0;for(let n=0;n<e.length;++n)i+=e[n]*t[n];return i}(e,t)}function x(e,t=m()){return function(e,t,i){for(let n=0;n<e.length;++n)i[n]=e[n]*t;return i}(e,1/(function(e){return Math.sqrt(b(e,e))}(e)||1),t)}function B(e,t,i=m()){const n=e[2]*t[0]-t[2]*e[0],r=e[0]*t[1]-t[0]*e[1];return i[0]=e[1]*t[2]-t[1]*e[2],i[1]=n,i[2]=r,i}function y(e){for(let t=0;t<16;++t)e[t]=t%5?0:1;return e}function F(e,t,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return function(e,t,i,n){const r=t.length/4,s=i.length/4;let o=0;p.length=r*s;for(let e=0;e<s;++e)for(let n=0;n<r;++n){o=0;for(let s=0;s<4;++s)o+=t[s*r+n]*i[4*e+s];p[e*r+n]=o}return g(p,n,0,0,p.length),n}(0,e,t,i)}m(),v(),v();const w=m(),S=m(),D=m();function k(e,t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return y(t),t[0]=e[0],t[5]=e[1],t[10]=e[2],t}function M(e,t,i,n=1/0,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){const s=1/Math.tan(t/2);if(y(r),r[0]=s/e,r[5]=s,r[11]=-1,r[15]=0,isFinite(n)){const e=1/(i-n);r[10]=(i+n)*e,r[14]=2*i*n*e}else r[10]=-1,r[14]=-2*i;return r}function C(e,t=m(),i=m(0,1,0),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){const r=function(e,t,i=m()){return function(e,t,i){for(let n=0;n<e.length;++n)i[n]=e[n]-t[n];return i}(e,t,i)}(t,e,w);x(r,r);const s=B(r,i,S);x(s,s);const o=B(s,r,D);return x(o,o),n[0]=s[0],n[1]=o[0],n[2]=-r[0],n[4]=s[1],n[5]=o[1],n[6]=-r[1],n[8]=s[2],n[9]=o[2],n[10]=-r[2],n[12]=-b(s,e),n[13]=-b(o,e),n[14]=b(r,e),n[3]=n[7]=n[11]=0,n[15]=1,n}const P=512,U=(0,o.LI)({positions:o.Xv.positions,uvs:o.Xv.uvs}),R=(0,o.iy)(o.Xv),T=(0,o.LI)(o.lD);class O extends o.r{offscreenPass=null;vertBuffer=null;indexBuffer=null;quadVertBuffer=null;cubeDataBuffer=null;cubePipeline=null;quadPipeline=null;colorTex=null;uvTex=null;positionTex=null;depthTex=null;offscreenTexSampler=null;offscreenTexBindGroup=null;cubeBindGroup=null;cubeData=new Float32Array(40);constructor(e){super(),this.device=e}init(){const e=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  mat4 model, vp;\n  vec3 color;\n};\nlayout(location = 0) in vec3 position;\nlayout(location = 1) in vec2 uv;\nout vec3 vPosition;\nout vec2 vUv;\nvoid main(void) {\n  vec4 worldPos = model * vec4(position, 1.0);\n  vPosition = worldPos.xyz;\n  vUv = uv;\n  gl_Position = vp * worldPos;\n}",usage:r.$X.Vertex}),t=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  mat4 model;\n  mat4 vp;\n  vec3 color;\n};\nin vec3 vPosition;\nin vec2 vUv;\nlayout(location = 0) out vec4 out0;\nlayout(location = 1) out vec4 out1;\nlayout(location = 2) out vec4 out2;\nvoid main(void) {\n  out0 = vec4(color, 1.0);\n  out1 = vec4(vUv, 0.0, 0.0);\n  out2 = vec4(vPosition, 0.0);\n}",usage:r.$X.Fragment}),i=n.ef(this.device,{code:"#version 300 es\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec2 uv;\nout vec2 vUv;\nvoid main(void) {\n  gl_Position = vec4(position, 1.0);\n  vUv = uv;\n}\n",usage:r.$X.Vertex}),a=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform sampler2D tex0, tex1, tex2;\nin vec2 vUv;\nout vec4 outColor;\nvoid main(void) {\n  vec4 colorSum =\n    texture(tex0, vUv * 2.0 - vec2(0.0, 1.0)) * step(0.5, 1.0 - vUv.x) * step(0.5, vUv.y) +\n    texture(tex1, vUv * 2.0 - vec2(0.0, 0.0)) * step(0.5, 1.0 - vUv.x) * step(0.5, 1.0 - vUv.y) +\n    texture(tex2, vUv * 2.0 - vec2(1.0, 1.0)) * step(0.5, vUv.x) * step(0.5, vUv.y);\n    outColor = vec4(colorSum.rgb, 1.0);\n}\n",usage:r.$X.Fragment}),l=n.mM(this.device,{entries:[{label:"Data",type:r.$l.Buffer}]});this.vertBuffer=(0,o.gS)(this.device,U),this.indexBuffer=(0,o.gS)(this.device,R,r.FB.Index),this.cubeDataBuffer=(0,o.gS)(this.device,this.cubeData,r.FB.Uniform|r.FB.Stream),this.cubeBindGroup=n.J3(this.device,{layout:l,entries:[{buffer:this.cubeDataBuffer}]}),this.cubePipeline=n.F0(this.device,{vertex:e,fragment:t,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2]}]),bindGroups:[l],depthStencil:{depthCompare:r.wb.LessEqual,depthWrite:!0},primitive:{cullMode:r.Wf.Back}});const c=n.mM(this.device,{entries:[{binding:0,label:"tex0",type:r.$l.Texture},{binding:1,label:"tex0",type:r.$l.Sampler},{binding:2,label:"tex1",type:r.$l.Texture},{binding:3,label:"tex1",type:r.$l.Sampler},{binding:4,label:"tex2",type:r.$l.Texture},{binding:5,label:"tex2",type:r.$l.Sampler}]});this.quadVertBuffer=(0,o.gS)(this.device,T),this.colorTex=n.cU(this.device,{size:[P,P,1],sampleCount:4}),this.uvTex=n.cU(this.device,{size:[P,P,1],sampleCount:4}),this.positionTex=n.cU(this.device,{size:[P,P,1],sampleCount:4}),this.offscreenTexSampler=n.bb(this.device,{magFilter:r.X9.Linear,minFilter:r.X9.Linear}),this.offscreenTexBindGroup=n.J3(this.device,{layout:c,entries:[{binding:0,texture:this.colorTex},{binding:1,sampler:this.offscreenTexSampler},{binding:2,texture:this.uvTex},{binding:3,sampler:this.offscreenTexSampler},{binding:4,texture:this.positionTex},{binding:5,sampler:this.offscreenTexSampler}]}),this.quadPipeline=n.F0(this.device,{vertex:i,fragment:a,bindGroups:[c],buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2]}])}),this.depthTex=n.cU(this.device,{format:r.EV.Depth16,size:[P,P,1],usage:r.v2.RenderAttachment,sampleCount:4}),this.offscreenPass=n.oR(this.device,{colors:[{view:{texture:this.colorTex},clear:[.1,.2,.3,1]},{view:{texture:this.uvTex},clear:[.3,.1,.2,1]},{view:{texture:this.positionTex},clear:[.1,.3,.2,1]}],depthStencil:{texture:this.depthTex},clearDepth:1}),this.register([this.offscreenPass,this.cubePipeline,this.vertBuffer,this.indexBuffer,this.cubeDataBuffer,this.cubeBindGroup,this.quadPipeline,this.quadVertBuffer,this.offscreenTexBindGroup,this.colorTex,this.uvTex,this.positionTex,this.depthTex,this.offscreenTexSampler,t,e,a,i,l,c])}render(e){{const t=m(.5,.5,.5),i=F(M(this.width/this.height,Math.PI/4,.01,100),C(function(e,t,i=m()){return function(e,t,i){for(let n=0;n<e.length;++n)i[n]=e[n]+t[n];return i}(e,t,i)}([5*Math.cos(e),2.5*Math.sin(e),5*Math.sin(e)],t),t));let r=function(e,t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){return y(t),g(e,t,0,12,3),t}(t);r=F(r,k([.5,.5,.5]),r),g(r,this.cubeData,0,0,16),g(i,this.cubeData,0,16,16),g([1,1,1],this.cubeData,0,32,3),n.F3(this.device,this.cubeDataBuffer,this.cubeData)}return n.Us(this.device,this.offscreenPass),n.rh(this.device,this.cubePipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.cubeBindGroup),n.sO(this.device,R.length),n.X$(this.device),n.pJ(this.device,{clearColor:[0,0,0,1],clearDepth:1}),n.rh(this.device,this.quadPipeline),n.pk(this.device,0,this.quadVertBuffer),n.yY(this.device,0,this.offscreenTexBindGroup),n.ii(this.device,6),n.X$(this.device),!0}}function A(e){return document.getElementById(e)}const _=o.c4,G=(0,o.LI)({positions:o.Xv.positions,normals:o.Xv.normals,uvs:o.Xv.uvs}),I=(0,o.iy)(o.Xv);class E extends o.r{vertBuffer=null;indexBuffer=null;matBuffer=null;envBuffer=null;cubeDataBuffer=null;skyDataBuffer=null;cubePipeline=null;cubeTex=null;skyPipeline=null;skyTex=null;sampler=null;envBindGroup=null;cubeTexBindGroup=null;cubeDataBindGroup=null;skyTexBindGroup=null;skyDataBindGroup=null;cubeData=new Float32Array(36);skyData=new Float32Array(36);constructor(e){super(),this.device=e}init(){const e=A("airplane"),t=A("sky0"),i=A("sky1"),a=A("sky2"),l=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  mat4 model, viewProj;\n  vec4 camPos;\n};\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec2 uv;\nlayout (location=2) in vec3 normal;\nout vec3 vPosition;\nout vec2 vUv;\nout vec3 vNormal;\n\nvoid main(void) {\n  vec4 worldPos = model * vec4(position, 1.0);\n  vPosition = worldPos.xyz / worldPos.w;\n  vNormal = mat3(model) * normalize(normal);\n  vUv = uv;\n  gl_Position = viewProj * worldPos;\n}\n",usage:r.$X.Vertex}),c=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform sampler2D tex;\nlayout(std140) uniform Data {\n  mat4 model, viewProj;\n  vec4 camPos;\n};\nlayout(std140) uniform Material {\n  vec4 albedo;\n  vec2 metallicRoughness;\n};\nlayout(std140) uniform Env {\n  vec4 ambient;\n  vec4 lightDir;\n  vec4 lightColor;\n};\n\nin vec3 vPosition;\nin vec2 vUv;\nin vec3 vNormal;\nout vec4 color;\n\nconst float PI = 3.14159265359;\n\nvec3 toSrgb(vec3 color) {\n  return pow(color, vec3(1.0/2.2));\n}\n\nvec4 toLinear(vec4 srgbIn) {\n  return vec4(pow(srgbIn.rgb, vec3(2.2)), srgbIn.a);\n}\n\nvec3 diffuse(vec3 color) {\n  return color / PI;\n}\n\nfloat specularD(float aSqr, float nDotH) {\n  float f = (nDotH * nDotH) * (aSqr - 1.0) + 1.0;\n  return aSqr / (PI * f * f);\n}\n\nvec3 specularF(vec3 r0, vec3 r90, float vDotH) {\n  return r0 + (r90 - r0) * pow(clamp(1.0 - vDotH, 0.0, 1.0), 5.0);\n}\n\nfloat specularG(float aSqr, float nDotL, float nDotV) {\n  float gl = 2.0 * nDotL / (nDotL + sqrt(aSqr + (1.0 - aSqr) * (nDotL * nDotL)));\n  float gv = 2.0 * nDotV / (nDotV + sqrt(aSqr + (1.0 - aSqr) * (nDotV * nDotV)));\n  return gl * gv;\n}\n\nvoid main () {\n  vec3 n = normalize(vNormal);\n  vec3 v = normalize(camPos.xyz - vPosition);\n  vec3 l = normalize(-lightDir.xyz);\n  vec3 h = normalize(l + v);\n\n  float nDotL = clamp(dot(n, l), 0.001, 1.0);\n  float nDotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n  float nDotH = clamp(dot(n, h), 0.0, 1.0);\n  float vDotH = clamp(dot(v, h), 0.0, 1.0);\n\n  vec4 baseColor = toLinear(texture(tex, vUv)) * albedo;\n\n  vec3 f0 = vec3(0.04);\n  vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0) * (1.0 - metallicRoughness.x);\n  vec3 specularColor = mix(f0, baseColor.rgb, metallicRoughness.x);\n\n  float r0 = max(max(specularColor.r, specularColor.g), specularColor.b);\n  float r90 = clamp(r0 * 25.0, 0.0, 1.0);\n  vec3 specularEnvR0 = specularColor.rgb;\n  vec3 specularEnvR90 = vec3(1.0, 1.0, 1.0) * r90;\n\n  float a = clamp(metallicRoughness.y, 0.04, 1.0);\n  a *= a;\n  float aSqr = a * a;\n\n  vec3 color0 = vec3(0.0);\n\n  vec3 F = specularF(specularEnvR0, specularEnvR90, vDotH);\n  float D = specularD(aSqr, nDotH);\n  float G = specularG(aSqr, nDotL, nDotV);\n\n  vec3 diffuse = (1.0 - F) * diffuse(diffuseColor);\n  vec3 specular = F * G * D / (4.0 * nDotL * nDotV);\n\n  color0 += nDotL * lightColor.rgb * lightColor.a * (diffuse + specular);\n  color0 += ambient.rgb * diffuseColor;\n\n  color = vec4(toSrgb(color0), baseColor.a);\n}",usage:r.$X.Fragment}),u=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform samplerCube tex;\nin vec3 vPosition;\nout vec4 color;\nvoid main () {\n  color = texture(tex, normalize(vPosition));\n}",usage:r.$X.Fragment});this.matBuffer=(0,o.gS)(this.device,(0,o.om)([1,1,1,1,.5,.5,0,0]),r.FB.Uniform),this.envBuffer=(0,o.gS)(this.device,(0,o.om)([223/255*.75,246/255*.75,245/255*.75,1,1,-2,1,0,252/255,203/255,203/255,5]),r.FB.Uniform),this.vertBuffer=(0,o.gS)(this.device,G),this.indexBuffer=(0,o.gS)(this.device,I,r.FB.Index),this.cubeDataBuffer=(0,o.gS)(this.device,this.cubeData,r.FB.Uniform|r.FB.Stream),this.skyDataBuffer=(0,o.gS)(this.device,this.skyData,r.FB.Uniform|r.FB.Stream);const d=n.mM(this.device,{entries:[{binding:0,label:"tex",type:r.$l.Texture},{binding:1,label:"tex",type:r.$l.Sampler}]}),f=n.mM(this.device,{entries:[{binding:0,label:"Material",type:r.$l.Buffer},{binding:1,label:"Env",type:r.$l.Buffer}]}),h=n.mM(this.device,{entries:[{label:"Data",type:r.$l.Buffer}]});this.cubeTex=n.cU(this.device,{size:[_,_,1]}),e&&(n.Yf(this.device,{src:e},{texture:this.cubeTex}),n.zd(this.device,this.cubeTex)),this.sampler=n.bb(this.device,{magFilter:r.X9.Linear,minFilter:r.X9.Linear,mipmapFilter:r.X9.Linear,maxAnisotropy:16}),this.cubeTexBindGroup=n.J3(this.device,{layout:d,entries:[{binding:0,texture:this.cubeTex},{binding:1,sampler:this.sampler}]}),this.envBindGroup=n.J3(this.device,{layout:f,entries:[{binding:0,buffer:this.matBuffer},{binding:1,buffer:this.envBuffer}]}),this.cubeDataBindGroup=n.J3(this.device,{layout:h,entries:[{buffer:this.cubeDataBuffer}]});const p={vertex:l,fragment:c,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2,r.gB.F32x3]}]),bindGroups:[d,f,h],depthStencil:{depthWrite:!0,depthCompare:r.wb.LessEqual},primitive:{cullMode:r.Wf.Back}};if(this.cubePipeline=n.F0(this.device,p),this.skyTex=n.cU(this.device,{dimension:r.kd.CubeMap,size:[_,_,1]}),t&&i&&a){const e=[t,t,i,a,t,t];for(let t=0;t<6;++t)n.Yf(this.device,{src:e[t]},{texture:this.skyTex,origin:[0,0,t]});n.zd(this.device,this.skyTex)}this.skyTexBindGroup=n.J3(this.device,{layout:d,entries:[{binding:0,texture:this.skyTex},{binding:1,sampler:this.sampler}]}),this.skyDataBindGroup=n.J3(this.device,{layout:h,entries:[{buffer:this.skyDataBuffer}]}),this.skyPipeline=n.F0(this.device,{vertex:l,fragment:u,buffers:p.buffers,bindGroups:[d,h],depthStencil:p.depthStencil,primitive:{cullMode:r.Wf.Front}}),this.register([this.vertBuffer,this.indexBuffer,this.matBuffer,this.envBuffer,this.cubeDataBuffer,this.skyDataBuffer,this.cubePipeline,this.cubeTex,this.skyPipeline,this.skyTex,this.sampler,this.envBindGroup,this.cubeDataBindGroup,this.cubeTexBindGroup,this.skyDataBindGroup,this.skyTexBindGroup,l,c,u,d,f,h])}render(e){{const t=m(10*Math.cos(e),5*Math.sin(e),10*Math.sin(e)),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=F(M(this.width/this.height,Math.PI/4,.01,100),C(t,[0,0,0]));g(i,this.cubeData,0,0,16),g(r,this.cubeData,0,16,16),g(t,this.cubeData,0,32,3),n.F3(this.device,this.cubeDataBuffer,this.cubeData),g(k([10,10,10]),this.skyData,0,0,16),g(r,this.skyData,0,16,16),g(t,this.skyData,0,32,3),n.F3(this.device,this.skyDataBuffer,this.skyData)}return n.pJ(this.device,{clearColor:[0,0,0,1],clearDepth:1}),n.rh(this.device,this.cubePipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.cubeTexBindGroup),n.yY(this.device,1,this.envBindGroup),n.yY(this.device,2,this.cubeDataBindGroup),n.sO(this.device,I.length),n.rh(this.device,this.skyPipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.skyTexBindGroup),n.yY(this.device,1,this.skyDataBindGroup),n.sO(this.device,I.length),n.X$(this.device),!0}}const $=512,X=[[-1,-1,-1,0,-1,8,-1,0,-1,-1,-1,0,0,0,0,0],[-2,-1,0,0,-1,1,1,0,0,1,2,0,0,0,0,0],[0,-1,0,0,-1,4,-1,0,0,-1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0]],L=(0,o.LI)({positions:o.Xv.positions,colors:o.Xv.colors}),z=(0,o.iy)(o.Xv),q=(0,o.LI)(o.lD);class W extends o.r{offscreenPass=null;vertBuffer=null;indexBuffer=null;quadVertBuffer=null;cubeDataBuffer=null;kernelDataBuffer=null;cubePipeline=null;quadPipeline=null;offscreenTex=null;offscreenTexSampler=null;depthTex=null;offscreenTexBindGroup=null;cubeBindGroup=null;kernelBindGroup=null;cubeData=new Float32Array(16);kernelData=new Float32Array(20);constructor(e){super(),this.device=e}init(){const e=n.ef(this.device,{code:"#version 300 es\nlayout(std140) uniform Data {\n  mat4 mvp;\n};\nlayout (location=0) in vec4 position;\nlayout (location=1) in vec4 color;\nout vec4 vColor;\nvoid main(void) {\n  gl_Position = mvp * position;\n  vColor = color;\n}",usage:r.$X.Vertex}),t=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nin vec4 vColor;\nout vec4 outColor;\nvoid main(void) {\n  outColor = vColor;\n}",usage:r.$X.Fragment}),i=n.ef(this.device,{code:"#version 300 es\nlayout (location=0) in vec4 position;\nlayout (location=1) in vec2 uv;\nout vec2 vUv;\nvoid main(void) {\n  gl_Position = position;\n  vUv = uv;\n}",usage:r.$X.Vertex}),a=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform sampler2D tex;\nlayout(std140) uniform Data {\n  mat4 kernel;\n  vec2 texSize;\n  float kernelWeight;\n};\nin vec2 vUv;\nout vec4 outColor;\nvoid main(void) {\n  vec2 onePixel = vec2(1.0, 1.0) / texSize;\n  vec4 colorSum =\n    texture(tex, vUv + onePixel * vec2(-1, -1)) * kernel[0][0] +\n    texture(tex, vUv + onePixel * vec2( 0, -1)) * kernel[0][1] +\n    texture(tex, vUv + onePixel * vec2( 1, -1)) * kernel[0][2] +\n    texture(tex, vUv + onePixel * vec2(-1,  0)) * kernel[1][0] +\n    texture(tex, vUv + onePixel * vec2( 0,  0)) * kernel[1][1] +\n    texture(tex, vUv + onePixel * vec2( 1,  0)) * kernel[1][2] +\n    texture(tex, vUv + onePixel * vec2(-1,  1)) * kernel[2][0] +\n    texture(tex, vUv + onePixel * vec2( 0,  1)) * kernel[2][1] +\n    texture(tex, vUv + onePixel * vec2( 1,  1)) * kernel[2][2] ;\n    outColor = vec4((colorSum / kernelWeight).rgb, 1);\n}",usage:r.$X.Fragment}),l=n.mM(this.device,{entries:[{label:"Data",type:r.$l.Buffer}]});this.vertBuffer=(0,o.gS)(this.device,L),this.indexBuffer=(0,o.gS)(this.device,z,r.FB.Index),this.cubeDataBuffer=(0,o.gS)(this.device,this.cubeData,r.FB.Uniform|r.FB.Stream),this.cubeBindGroup=n.J3(this.device,{layout:l,entries:[{buffer:this.cubeDataBuffer}]}),this.cubePipeline=n.F0(this.device,{vertex:e,fragment:t,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x4]}]),bindGroups:[l],depthStencil:{depthCompare:r.wb.LessEqual,depthWrite:!0},primitive:{cullMode:r.Wf.Back}});const c=n.mM(this.device,{entries:[{binding:0,label:"tex",type:r.$l.Texture},{binding:1,label:"tex",type:r.$l.Sampler}]});this.quadVertBuffer=(0,o.gS)(this.device,q),this.kernelDataBuffer=(0,o.gS)(this.device,this.kernelData,r.FB.Uniform|r.FB.Stream),this.offscreenTex=n.cU(this.device,{size:[$,$,1],sampleCount:1}),this.offscreenTexSampler=n.bb(this.device,{magFilter:r.X9.Linear,minFilter:r.X9.Linear}),this.offscreenTexBindGroup=n.J3(this.device,{layout:c,entries:[{binding:0,texture:this.offscreenTex},{binding:1,sampler:this.offscreenTexSampler}]}),this.kernelBindGroup=n.J3(this.device,{layout:l,entries:[{buffer:this.kernelDataBuffer}]}),this.quadPipeline=n.F0(this.device,{vertex:i,fragment:a,bindGroups:[c,l],buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2]}])}),this.depthTex=n.cU(this.device,{format:r.EV.Depth16,size:[$,$,1],usage:r.v2.RenderAttachment,sampleCount:1}),this.offscreenPass=n.oR(this.device,{colors:[{view:{texture:this.offscreenTex},clear:[.25,.25,.25,1]}],depthStencil:{texture:this.depthTex},clearDepth:1}),this.register([this.cubePipeline,this.vertBuffer,this.indexBuffer,this.cubeDataBuffer,this.kernelDataBuffer,this.quadPipeline,this.quadVertBuffer,this.offscreenTex,this.offscreenTexSampler,this.depthTex,this.offscreenPass,this.cubeBindGroup,this.offscreenTexBindGroup,this.kernelBindGroup,t,e,a,i,c,l])}render(e){g(F(M(this.width/this.height,Math.PI/4,.01,100),C([10*Math.cos(e),5*Math.sin(e),10*Math.sin(e)],[0,0,0])),this.cubeData,0,0,16),n.F3(this.device,this.cubeDataBuffer,this.cubeData);{const t=X[Math.floor(e/2)%X.length];let i=0;for(let e=0;e<t.length;++e)i+=t[e];i=i<=0?1:i,g(t,this.kernelData,0,0,16),this.kernelData[16]=$,this.kernelData[17]=$,this.kernelData[18]=i,n.F3(this.device,this.kernelDataBuffer,this.kernelData)}return n.Us(this.device,this.offscreenPass),n.rh(this.device,this.cubePipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.cubeBindGroup),n.sO(this.device,z.length),n.X$(this.device),n.pJ(this.device,{clearColor:[0,0,0,1],clearDepth:1}),n.rh(this.device,this.quadPipeline),n.pk(this.device,0,this.quadVertBuffer),n.yY(this.device,0,this.offscreenTexBindGroup),n.yY(this.device,1,this.kernelBindGroup),n.ii(this.device,6),n.X$(this.device),!0}}const V=(0,o.LI)({positions:o.Xv.positions,uvs:o.Xv.uvs}),Y=(0,o.iy)(o.Xv),j=Y.length,J=new Uint16Array(2*j);for(let e=0;e<j;++e)J[e]=Y[e];for(let e=0;e<j;e+=3)J[j+e]=Y[e+2],J[j+e+1]=Y[e+1],J[j+e+2]=Y[e];const N=o.c4;class H extends o.r{vertBuffer=null;indexBuffer=null;data=new Float32Array(192);dataBuffer=null;texture=null;sampler=null;cubePipeline=null;cubeOutlinePipeline=null;textureBindGroup=null;dataBindGroup=null;constructor(e){super(),this.device=e}init(){const e=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  mat4 mvp;\n  vec4 outline;\n};\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec2 uv;\nout vec2 vUv;\nvoid main(void) {\n  vUv = uv;\n  gl_Position = mvp * vec4(position, 1.0);\n}\n",usage:r.$X.Vertex}),t=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nin vec2 vUv;\nout vec4 outColor;\nuniform sampler2D tex;\nvoid main () {\n  outColor = texture(tex, vUv);\n}\n",usage:r.$X.Fragment}),i=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nlayout(std140) uniform Data {\n  mat4 mvp;\n  vec4 outline;\n};\nout vec4 outColor;\nvoid main () {\n  outColor = outline;\n}\n",usage:r.$X.Fragment});this.vertBuffer=(0,o.gS)(this.device,V),this.indexBuffer=(0,o.gS)(this.device,J,r.FB.Index),this.dataBuffer=(0,o.gS)(this.device,this.data,r.FB.Uniform|r.FB.Stream),this.texture=n.cU(this.device,{size:[N,N,1]});const a=A("airplane");a&&n.Yf(this.device,{src:a},{texture:this.texture}),this.sampler=n.bb(this.device,{});const l=n.mM(this.device,{entries:[{binding:0,label:"tex",type:r.$l.Texture},{binding:1,label:"tex",type:r.$l.Sampler}]}),c=n.mM(this.device,{entries:[{label:"Data",type:r.$l.Buffer,bufferDynamicOffset:!0}]});this.textureBindGroup=n.J3(this.device,{layout:l,entries:[{binding:0,texture:this.texture},{binding:1,sampler:this.sampler}]}),this.dataBindGroup=n.J3(this.device,{layout:c,entries:[{buffer:this.dataBuffer,bufferSize:256}]});const u={vertex:e,fragment:t,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2]}]),bindGroups:[l,c],depthStencil:{depthWrite:!0,depthCompare:r.wb.LessEqual,stencilBack:{compare:r.wb.Always,passOp:r.xS.Replace},stencilFront:{compare:r.wb.Always,passOp:r.xS.Replace}},primitive:{cullMode:r.Wf.Back}};this.cubePipeline=n.F0(this.device,u),this.cubeOutlinePipeline=n.F0(this.device,{vertex:e,fragment:i,buffers:u.buffers,bindGroups:[c],depthStencil:{depthWrite:!0,stencilBack:{compare:r.wb.NotEqual},stencilFront:{compare:r.wb.NotEqual},stencilWriteMask:0},primitive:u.primitive}),this.register([this.vertBuffer,this.indexBuffer,this.dataBuffer,this.texture,this.sampler,this.textureBindGroup,this.dataBindGroup,this.cubePipeline,this.cubeOutlinePipeline,e,t,i,l,c])}render(e){{const t=F(M(this.width/this.height,Math.PI/4,.01,100),C([10*Math.cos(e),5*Math.sin(e),10*Math.sin(e)],[0,0,0]));let i=t;g(i,this.data,0,0,16),i=F(t,k([1.1,1.1,1.1])),g(i,this.data,0,64,16),g([.1,.3,.2,1],this.data,0,80,4),i=F(t,k([10,10,10])),g(i,this.data,0,128,16)}return n.F3(this.device,this.dataBuffer,this.data),n.pJ(this.device,{clearDepth:1,clearStencil:0}),n.rh(this.device,this.cubePipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.textureBindGroup),n.yY(this.device,1,this.dataBindGroup,[0]),n.IM(this.device,1),n.sO(this.device,j),n.yY(this.device,1,this.dataBindGroup,[512]),n.IM(this.device,0),n.sO(this.device,j,1,j),n.rh(this.device,this.cubeOutlinePipeline),n.i3(this.device,this.indexBuffer),n.pk(this.device,0,this.vertBuffer),n.yY(this.device,0,this.dataBindGroup,[256]),n.IM(this.device,1),n.sO(this.device,j),n.X$(this.device),!0}}const K=o.c4,Q=[];for(let e=0;e<o.Xv.uvs.length;++e){const t=o.Xv.uvs[e];Q.push([2*t[0],2*t[1]])}const Z=(0,o.LI)({positions:o.Xv.positions,uvs:Q}),ee=(0,o.iy)(o.Xv);class te{cameraData=new Float32Array(16);constructor(e,t,i,s,a,l){this.device=e,this.vertexBuffer=s,this.indexBuffer=a,this.indexCount=l;const c=n.mM(e,{entries:[{label:"tex",type:r.$l.Texture,binding:0},{label:"tex",type:r.$l.Sampler,binding:1}]}),u=n.mM(e,{entries:[{label:"Camera",type:r.$l.Buffer}]});t.bindGroups=[c,u],this.pipeline=n.F0(e,t),this.texture=n.cU(e,{dimension:i,size:[K,K,1]}),this.sampler=n.bb(e,{magFilter:r.X9.Linear,minFilter:r.X9.Linear,mipmapFilter:r.X9.Linear,addressModeU:r.OB.Repeat,addressModeV:r.OB.Repeat,maxAnisotropy:16}),this.cameraBuffer=(0,o.gS)(e,this.cameraData,r.FB.Uniform|r.FB.Stream),this.textureBindGroup=n.J3(e,{layout:c,entries:[{binding:0,texture:this.texture},{binding:1,sampler:this.sampler}]}),this.cameraBindGroup=n.J3(e,{layout:u,entries:[{buffer:this.cameraBuffer}]}),c.destroy(),u.destroy()}updateCamera(e){g(e,this.cameraData,0,0,16),n.F3(this.device,this.cameraBuffer,this.cameraData)}render(e){n.rh(e,this.pipeline),n.i3(e,this.indexBuffer),n.pk(e,0,this.vertexBuffer),n.yY(e,0,this.textureBindGroup),n.yY(e,1,this.cameraBindGroup),n.sO(e,this.indexCount)}destroy(){this.pipeline.destroy(),this.textureBindGroup.destroy(),this.cameraBindGroup.destroy(),this.texture.destroy(),this.sampler.destroy(),this.cameraBuffer.destroy()}}class ie extends o.r{vertBuffer=null;indexBuffer=null;cube=null;skybox=null;constructor(e){super(),this.device=e}init(){const e=A("airplane"),t=A("sky0"),i=A("sky1"),a=A("sky2"),l=n.ef(this.device,{code:"#version 300 es\nlayout(std140) uniform Camera {\n  mat4 mvp;\n};\nlayout (location=0) in vec3 position;\nlayout (location=1) in vec2 uv;\nout vec2 vUv;\nout vec3 vNormal;\nvoid main(void) {\n  vUv = uv;\n  vNormal = normalize(position);\n  gl_Position = mvp * vec4(position, 1.0);\n}\n",usage:r.$X.Vertex}),c=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform sampler2D tex;\nin vec2 vUv;\nout vec4 outColor;\nvoid main () {\n  outColor = texture(tex, vUv);\n}\n",usage:r.$X.Fragment}),u=n.ef(this.device,{code:"#version 300 es\nprecision mediump float;\nuniform samplerCube tex;\nin vec3 vNormal;\nout vec4 outColor;\nvoid main () {\n  outColor = texture(tex, normalize(vNormal));\n}\n",usage:r.$X.Fragment});this.vertBuffer=(0,o.gS)(this.device,Z),this.indexBuffer=(0,o.gS)(this.device,ee,r.FB.Index);const d={vertex:l,fragment:c,buffers:(0,s.O5)([{attributes:[r.gB.F32x3,r.gB.F32x2]}]),depthStencil:{depthWrite:!0,depthCompare:r.wb.LessEqual},primitive:{cullMode:r.Wf.Back}};this.cube=new te(this.device,d,r.kd.D2,this.vertBuffer,this.indexBuffer,ee.length),e&&(n.Yf(this.device,{src:e},{texture:this.cube.texture}),n.zd(this.device,this.cube.texture));const f={vertex:l,fragment:u,buffers:d.buffers,depthStencil:d.depthStencil,primitive:{cullMode:r.Wf.Front}};if(this.skybox=new te(this.device,f,r.kd.CubeMap,this.vertBuffer,this.indexBuffer,ee.length),t&&i&&a){const e=[t,t,i,a,t,t];for(let t=0;t<6;++t)n.Yf(this.device,{src:e[t]},{texture:this.skybox.texture,origin:[0,0,t]});n.zd(this.device,this.skybox.texture)}this.register([this.vertBuffer,this.indexBuffer,l,c,u])}render(e){const t=F(M(this.width/this.height,Math.PI/4,.01,100),C([10*Math.cos(e),5*Math.sin(e),10*Math.sin(e)],[0,0,0]));let i=t;return this.cube.updateCamera(i),i=F(t,k([10,10,10]),t),this.skybox.updateCamera(i),n.pJ(this.device,{clearColor:[.1,.2,.3,1],clearDepth:1}),this.cube.render(this.device),this.skybox.render(this.device),n.X$(this.device),!0}destroy(){super.destroy(),this.cube.destroy(),this.skybox.destroy()}}class ne{constructor(e,t,i){this.id=e,this.title=t,this.factory=i}}const re=[new ne("basic","Hello World",(e=>new l(e))),new ne("instancing","Buffers & Instancing",(e=>new h(e))),new ne("texture","Texture & Sampler",(e=>new ie(e))),new ne("stencil","Depth Stencil",(e=>new H(e))),new ne("postprocess","Post-processing",(e=>new W(e))),new ne("mrt","Multi Render Targets",(e=>new O(e))),new ne("pbr","Physically Based Rendering",(e=>new E(e)))]},618:(e,t,i)=>{i.d(t,{db:()=>s,r:()=>r,Xv:()=>d,Go:()=>n,lD:()=>u,c4:()=>o,CJ:()=>c,gS:()=>p,om:()=>g,MA:()=>v,iy:()=>l,LI:()=>a});class n{init(){}render(e){return!1}resize(e,t){}destroy(){}}class r extends n{resources=[];width=1;height=1;resize(e,t){this.width=e,this.height=t}destroy(){for(let e=0;e<this.resources.length;++e)this.resources[e].destroy();this.resources.length=0}register(e){for(let t=0;t<e.length;++t)this.resources.push(e[t])}}const s=1337,o=512;function a(e){const t=e.positions,i=e.uvs,n=e.normals,r=e.colors;let s=0,o=0;t&&(o=t.length,s+=3),i&&(s+=2),n&&(s+=3),r&&(s+=4);const a=new Float32Array(s*o);for(let e=0;e<o;++e){let o=0;t&&(a[e*s+o++]=t[e][0],a[e*s+o++]=t[e][1],a[e*s+o++]=t[e][2]),i&&(a[e*s+o++]=i[e][0],a[e*s+o++]=i[e][1]),n&&(a[e*s+o++]=n[e][0],a[e*s+o++]=n[e][1],a[e*s+o++]=n[e][2]),r&&(a[e*s+o++]=r[e][0],a[e*s+o++]=r[e][1],a[e*s+o++]=r[e][2],a[e*s+o++]=r[e][3])}return a}function l(e){const t=e.indices;if(!t)return new Uint16Array(0);const i=new Uint16Array(3*t.length);for(let e=0;e<t.length;++e)i[3*e]=t[e][0],i[3*e+1]=t[e][1],i[3*e+2]=t[e][2];return i}const c={positions:[[0,.5,0],[.5,-.5,0],[-.5,-.5,0]],colors:[[1,0,0,1],[0,1,0,1],[0,0,1,1]]},u={positions:[[-1,-1,1],[1,-1,1],[1,1,1],[-1,-1,1],[1,1,1],[-1,1,1]],uvs:[[0,0],[1,0],[1,1],[0,0],[1,1],[0,1]]},d={indices:[[2,1,0],[2,0,3],[6,5,4],[6,4,7],[10,9,8],[10,8,11],[14,13,12],[14,12,15],[18,17,16],[18,16,19],[20,21,22],[23,20,22]],positions:[[-1,1,1],[1,1,1],[1,-1,1],[-1,-1,1],[1,1,-1],[-1,1,-1],[-1,-1,-1],[1,-1,-1],[1,1,1],[1,1,-1],[1,-1,-1],[1,-1,1],[-1,1,-1],[-1,1,1],[-1,-1,1],[-1,-1,-1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1],[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1]],uvs:[[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1],[0,0],[1,0],[1,1],[0,1]],normals:[[0,0,1],[0,0,1],[0,0,1],[0,0,1],[0,0,-1],[0,0,-1],[0,0,-1],[0,0,-1],[1,0,0],[1,0,0],[1,0,0],[1,0,0],[-1,0,0],[-1,0,0],[-1,0,0],[-1,0,0],[0,1,0],[0,1,0],[0,1,0],[0,1,0],[0,-1,0],[0,-1,0],[0,-1,0],[0,-1,0]],colors:[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[0,1,0,1],[0,1,0,1],[0,1,0,1],[0,1,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,1,0,1],[1,1,0,1],[1,1,0,1],[1,1,0,1],[0,1,1,1],[0,1,1,1],[0,1,1,1],[0,1,1,1],[1,0,1,1],[1,0,1,1],[1,0,1,1],[1,0,1,1]]};var f=i(720),h=i(709);function p(e,t,i=f.FB.Vertex){const n=h.gS(e,{usage:i,size:t.byteLength});return h.F3(e,n,t),n}function g(e){const t=new Float32Array(e.length);for(let i=0;i<e.length;++i)t[i]=e[i];return t}function v(e){const t=new Uint16Array(e.length);for(let i=0;i<e.length;++i)t[i]=e[i];return t}},721:(e,t,i)=>{i.d(t,{lL:()=>s});var n=i(618);function r(e){const t=new Image;return e.canvas.toBlob((e=>t.src=URL.createObjectURL(e))),t}function s(e=n.c4){const t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),new Promise(((i,n)=>{let s=1;const o=()=>{--s<=0&&i()},a=function(e){const t=new Image;return t.crossOrigin="anonymous",t.src="./airplane.png",t}();a.id="airplane",a.onload=o,a.onerror=n,t.appendChild(a);const l=function(e){const t=document.createElement("canvas");t.width=t.height=e;const i=t.getContext("2d"),n="#28ccdf",s="#39314b",o=i.createLinearGradient(0,0,0,e);o.addColorStop(0,n),o.addColorStop(.4,"#8aebf1"),o.addColorStop(.99,"#dff6f5"),o.addColorStop(1,s),i.fillStyle=n,i.fillRect(0,0,e,e);const a=r(i);i.fillStyle=s,i.fillRect(0,0,e,e);const l=r(i);return i.fillStyle=o,i.fillRect(0,0,e,e),[r(i),a,l]}(e);s+=l.length;for(let e=0;e<l.length;++e)l[e].id=`sky${e}`,l[e].onload=o,l[e].onerror=n,t.appendChild(l[e])}))}},440:(e,t,i)=>{i.a(e,(async(e,t)=>{try{var n=i(709),r=i(513),s=i(618),o=i(766),a=i(721),l=i(869),c=e([l]);l=(c.then?(await c)():c)[0];class f extends s.Go{constructor(e){super(),this.uri=e}render(){return window.location.replace(this.uri),!1}}let h=!1;const p=await(0,l.Y)();class g extends s.Go{wasmModule=null;constructor(e){super(),this.id=e}init(){p.init(this.id)}render(e){return p.render(e)}resize(e,t){p.resize(e,t)}destroy(){p.destroy()}}function u(e,t,i){return t=>h?new g(e):i(t)}const v={};for(let S=0;S<o.B.length;++S)v[o.B[S].id]=new o.p(o.B[S].id,o.B[S].title,u(S,o.B[S].id,o.B[S].factory));v.gltf=new o.p("gltf","glTF Model Viewer 🔗",(()=>new f("../gltf-viewer"))),v.docs=new o.p("docs","API Documentation 🔗",(()=>new f("../docs")));const m=document.getElementById("menu");for(const D in v){const k=document.createElement("li"),M=document.createElement("a");M.id=v[D].id,M.href=`#${v[D].id}`,M.innerText=v[D].title,k.appendChild(M),m.appendChild(k)}const b=document.querySelector("canvas"),x=window.devicePixelRatio||1;if(x>1){const{width:C,height:P}=b;b.width=C*x,b.height=P*x,b.style.width=`${C}px`,b.style.height=`${P}px`}const B=n.hS(b,{stencil:!0,powerPreference:"low-power"},r.N.TextureAnisotropic|r.N.TextureHalfFloatLinear|r.N.TextureFloatLinear|r.N.ColorBufferFloat);let y,F=0;function d(e=0){F=requestAnimationFrame(d),y.render(e/1e3)||cancelAnimationFrame(F)}window.loadExample=function(e=location.hash){const t=v[e.replace("#","")];t&&(document.getElementById("title").innerText=t.title,document.getElementById("code").href=`https://github.com/andykswong/mugl/tree/main/examples/src/apps/${t.id}.ts`,cancelAnimationFrame(F),y&&(y.destroy(),n.zI(B)),y=t.factory(B),y.init(),y.resize(b.width,b.height),d())};const w=(0,a.lL)();location.hash=location.hash||"#basic",document.getElementById("mode")?.addEventListener("click",(e=>{h=e.target.checked,window.loadExample()})),w.then((()=>{window.loadExample()})),t()}catch(U){t(U)}}),1)},497:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{D:()=>a,J:()=>o});var r=i(132),s=e([r]);function o(){}r=(s.then?(await s)():s)[0];const a=Date.now;n()}catch(l){n(l)}}))},869:(e,t,i)=>{i.a(e,(async(e,n)=>{try{i.d(t,{Y:()=>l});var r=i(837),s=i(132),o=i(618),a=e([s]);async function l(){return(0,r.GH)(o.db,s.memory),{init:s.init,render:s.render,resize:s.resize,destroy:s.destroy}}s=(a.then?(await a)():a)[0],n()}catch(c){n(c)}}))},709:(e,t,i)=>{i.d(t,{pJ:()=>$,Us:()=>E,Yf:()=>I,J3:()=>O,mM:()=>T,gS:()=>M,oR:()=>R,F0:()=>A,bb:()=>P,ef:()=>U,cU:()=>C,ii:()=>V,sO:()=>Y,zd:()=>G,hS:()=>D,zI:()=>k,yY:()=>W,i3:()=>z,rh:()=>L,IM:()=>j,pk:()=>q,X$:()=>X,F3:()=>_});const n=!1;var r=i(544),s=i(720),o=i(232);function a(e){switch(e){case r.q6i:case r.xiM:case r.$oc:case r.LGL:case r.qB9:case r.nR4:case r.Qjo:case r.Msg:case r.gtH:return r.bBe;case r.LrX:case r.iVF:case r.If2:case r.coM:case r.ZLz:case r.m89:case r.r5A:case r.rxK:case r.Rkd:return r.r1O}return r.RFu}var l=i(513);const c=4294967295;function u(e){const t=d();e.blendColor(1,1,1,1),h(e,null,t,t,0,!0);const i=e.getParameter(r.Fcx);for(let t=0;t<i;++t)e.disableVertexAttribArray(t);return e.pixelStorei(r.d8P,1),e.pixelStorei(r.T_I,1),{copyFrameBuffer:e.createFramebuffer(),buffers:[],state:t,pipeline:null,index:null,stencilRef:0,scissor:!1}}function d(e={}){const t=e.primitive||{},i=e.depthStencil||{},{stencilFront:n={},stencilBack:s={}}=i,{sampleCount:o=1,alphaToCoverage:a=!1}=e.multisample||{},l=e.targets||{},u=l.targets&&l.targets.map((e=>f(e.blendColor,e.blendAlpha,e.writeMask)))||[];return{sampleCount:o,alphaToCoverage:a,topology:t.topology||r.QPP,indexFormat:t.indexFormat||r.Ae4,frontFace:t.frontFace||r.iHR,cullMode:t.cullMode||r.Hnw,depth:!!e.depthStencil,depthWrite:i.depthWrite||!1,depthFormat:i.format||r.kv5,depthCompare:i.depthCompare||r.Brs,depthBias:i.depthBias||0,depthBiasSlopeScale:i.depthBiasSlopeScale||0,stencil:!(!i.stencilFront&&!i.stencilBack),stencilFrontCompare:n.compare||r.Brs,stencilFrontFailOp:n.failOp||r.M$f,stencilFrontDepthFailOp:n.depthFailOp||r.M$f,stencilFrontPassOp:n.passOp||r.M$f,stencilBackCompare:s.compare||r.Brs,stencilBackFailOp:s.failOp||r.M$f,stencilBackDepthFailOp:s.depthFailOp||r.M$f,stencilBackPassOp:s.passOp||r.M$f,stencilReadMask:i.stencilReadMask||c,stencilWriteMask:i.stencilWriteMask||c,blend:!!e.targets,drawBuffers:u,...f(l.blendColor,l.blendAlpha,l.writeMask)}}function f(e={},t={},i=s.Yw.All){return{blendWriteMask:i,blendColorOp:e.operation||r.BjA,blendColorSrcFactor:void 0!==e.srcFactor?e.srcFactor:r.ryP,blendColorDstFactor:e.dstFactor||r.xEJ,blendAlphaOp:t.operation||r.BjA,blendAlphaSrcFactor:void 0!==t.srcFactor?t.srcFactor:r.ryP,blendAlphaDstFactor:t.dstFactor||r.xEJ}}function h(e,t,i,n,s=0,o=!1){let a=!1,l=0,c=0,u=0,d=0;if(l=n.frontFace,(o||i.frontFace!==l)&&e.frontFace(l),l=n.cullMode,(o||i.cullMode!==l)&&((a=l!==r.Hnw)&&e.cullFace(l),b(e,r.DuX,a)),a=n.alphaToCoverage,(o||i.alphaToCoverage!==a)&&b(e,r.fRZ,a),a=!!n.depth,(o||i.depth!==a)&&b(e,r.Elr,a),(o||a)&&(v(e,i.depthWrite,n.depthWrite,o),l=n.depthCompare,(o||i.depthCompare!==l)&&e.depthFunc(l)),l=n.depthBiasSlopeScale,c=n.depthBias,(o||i.depthBiasSlopeScale!==l||i.depthBias!==c)&&(b(e,r.gYZ,!(!l&&!c)),e.polygonOffset(l,c)),a=!!n.stencil,(o||i.stencil!==a)&&b(e,r.nT3,a),(o||a)&&(l=n.stencilReadMask,a=o||i.stencilReadMask!==l,c=n.stencilFrontCompare,(a||i.stencilFrontCompare!==c)&&e.stencilFuncSeparate(r.kpY,c,s,l),c=n.stencilBackCompare,(a||i.stencilBackCompare!==c)&&e.stencilFuncSeparate(r.FoO,c,s,l),l=n.stencilFrontFailOp,c=n.stencilFrontDepthFailOp,u=n.stencilFrontPassOp,(o||i.stencilFrontFailOp!==l||i.stencilFrontDepthFailOp!==c||i.stencilFrontPassOp!==u)&&e.stencilOpSeparate(r.kpY,l,c,u),l=n.stencilBackFailOp,c=n.stencilBackDepthFailOp,u=n.stencilBackPassOp,(o||i.stencilBackFailOp!==l||i.stencilBackDepthFailOp!==c||i.stencilBackPassOp!==u)&&e.stencilOpSeparate(r.FoO,l,c,u),m(e,i.stencilWriteMask,n.stencilWriteMask,o)),a=n.blend,(o||i.blend!==a)&&b(e,r.uvM,a),(o||a)&&(l=n.blendColorSrcFactor,c=n.blendColorDstFactor,u=n.blendAlphaSrcFactor,d=n.blendAlphaDstFactor,(o||i.blendColorSrcFactor!==l||i.blendColorDstFactor!==c||i.blendAlphaSrcFactor!==u||i.blendAlphaDstFactor!==d)&&e.blendFuncSeparate(l,c,u,d),l=n.blendColorOp,c=n.blendAlphaOp,(o||i.blendColorOp!==l||i.blendAlphaOp!==c)&&e.blendEquationSeparate(l,c),g(e,i.blendWriteMask,n.blendWriteMask,o),t))for(let e=0;e<n.drawBuffers.length;++e)p(t,e,n,n.drawBuffers[e])}function p(e,t,i,n,r=!1){let o=0,a=0,l=0,c=0;o=n.blendColorSrcFactor,a=n.blendColorDstFactor,l=n.blendAlphaSrcFactor,c=n.blendAlphaDstFactor,(r||i.blendColorSrcFactor!==o||i.blendColorDstFactor!==a||i.blendAlphaSrcFactor!==l||i.blendAlphaDstFactor!==c)&&e.blendFuncSeparateiOES(t,o,a,l,c),o=n.blendColorOp,a=n.blendAlphaOp,(r||i.blendColorOp!==o||i.blendAlphaOp!==a)&&e.blendEquationSeparateiOES(t,o,a),function(e,t,i,n,r=!1){(r||i!==n)&&e.colorMaskiOES(t,!!(n&s.Yw.Red),!!(n&s.Yw.Green),!!(n&s.Yw.Blue),!!(n&s.Yw.Alpha))}(e,t,i.blendWriteMask,n.blendWriteMask,r)}function g(e,t,i,n=!1){(n||t!==i)&&e.colorMask(!!(i&s.Yw.Red),!!(i&s.Yw.Green),!!(i&s.Yw.Blue),!!(i&s.Yw.Alpha))}function v(e,t,i,n=!1){(n||t!==i)&&e.depthMask(i)}function m(e,t,i,n=!1){(n||t!==i)&&e.stencilMask(i)}function b(e,t,i){i?e.enable(t):e.disable(t)}function x(e,t,{texture:i,slice:n=0,mipLevel:s=0}){if((0,o.cj)(i.type))e.framebufferTextureLayer(r.fjQ,t,i.glt,s,n);else{const o=i.type===r.Ep7?r._fi+n:i.type;e.framebufferTexture2D(r.fjQ,t,o,i.glt,s)}}function B(e,t,i){const n=e.createFramebuffer();return e.bindFramebuffer(r.fjQ,n),x(e,t,i),n}function y(e,t,i,n,s,o=r.Z$E){e.bindFramebuffer(r.xWx,t),e.bindFramebuffer(r.iXE,i),e.readBuffer(o),e.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,s,r.jX6)}function F(e,t,i){e.bindBuffer(r.qOY,t.glb);for(let n=0;n<t.attributes.length;++n){const{ptr:r,step:s}=t.attributes[n],o=[...r];o[5]+=i,e.vertexAttribPointer(...o),e.vertexAttribDivisor(r[0],s)}}const w=255;let S=null;function D(e,t={},i=0){const r=e.getContext("webgl2",t);if(r){let t=0;for(const e in l.T)i&+e&&r.getExtension(l.T[+e])&&(t|=+e);const s=t&l.N.DrawBuffersIndexed?r.getExtension(l.T[l.N.DrawBuffersIndexed]):null,o=u(r),a=e=>{e.deleteFramebuffer(o.copyFrameBuffer)},c={canvas:e,gl:r,features:t,extDrawBuffersi:s,pass:null,state:o,destroy(){a(this.gl)}};return n&&S.register(c,{finalizer:a,gl:r}),c}return null}function k(e){e.destroy(),Object.assign(e.state,u(e.gl))}function M(e,t){const i=t.usage&s.FB.Uniform?r.MfQ:t.usage&s.FB.Index?r.cXR:r.qOY,o=t.usage&s.FB.Stream?r.F_0:t.usage&s.FB.Dynamic?r.kdr:r.MBW,a=e.gl.createBuffer();e.gl.bindBuffer(i,a),e.gl.bufferData(i,t.size,o);const l=e=>{e.deleteBuffer(a)},c={gl:e.gl,glb:a,type:i,size:t.size,destroy(){l(this.gl)}};return n&&S.register(c,{finalizer:l,gl:e.gl}),c}function C(e,t){const i=t.sampleCount||1,a=t.dimension||r.Bxn,l=t.format||r.hw6,c=!(0,o.EC)(l)||(t.usage||0)&s.v2.TextureBinding,[u,d,f]=t.size||[1,1,1],h=a===r.Ep7?6:a===r.Bxn?1:f;let p=null,g=null;(i>1||!c)&&(g=e.gl.createRenderbuffer(),e.gl.bindRenderbuffer(r.bW,g),i>1?e.gl.renderbufferStorageMultisample(r.bW,i,l,u,d):e.gl.renderbufferStorage(r.bW,l,u,d)),c&&(p=e.gl.createTexture(),e.gl.activeTexture(r.VKS),e.gl.bindTexture(a,p),(0,o.cj)(a)?e.gl.texStorage3D(a,t.mipLevelCount||1,l,u,d,h):e.gl.texStorage2D(a,t.mipLevelCount||1,l,u,d));const v=e=>{e.deleteTexture(p),e.deleteRenderbuffer(g)},m={gl:e.gl,glt:p,glrb:g,type:a,format:l,width:u,height:d,depth:h,samples:i,destroy(){v(this.gl)}};return n&&S.register(m,{finalizer:v,gl:e.gl}),m}function P(e,t={}){const i=e.gl.createSampler();let s=t.minFilter||r.jX6;t.mipmapFilter&&(s=t.mipmapFilter===r.jX6?s===r.jX6?r.wFH:r.LRx:s===r.jX6?r.Oxh:r.q0S),e.gl.samplerParameteri(i,r.$X9,s),e.gl.samplerParameteri(i,r.Xeo,t.magFilter||r.jX6),e.gl.samplerParameteri(i,r.n4e,t.addressModeU||r.mYe),e.gl.samplerParameteri(i,r.nbD,t.addressModeV||r.mYe),e.gl.samplerParameteri(i,r.J51,t.addressModeW||r.mYe),e.gl.samplerParameterf(i,r.HiH,void 0!==t.lodMaxClamp?t.lodMaxClamp:32),e.gl.samplerParameterf(i,r.pge,t.lodMinClamp||0),t.compare&&(e.gl.samplerParameterf(i,r.LOg,r.fqf),e.gl.samplerParameterf(i,r.w0M,t.compare)),(t.maxAnisotropy||1)>1&&e.gl.samplerParameterf(i,r.cMJ,Math.min(t.maxAnisotropy||1,e.gl.getParameter(r.Cip)));const o=e=>{e.deleteSampler(i)},a={gls:i,gl:e.gl,destroy(){o(this.gl)}};return n&&S.register(a,{finalizer:o,gl:e.gl}),a}function U(e,t){const i=t.usage===s.$X.Vertex?r.HI8:r.YMo,o=e.gl.createShader(i);e.gl.shaderSource(o,t.code),e.gl.compileShader(o);const a=e=>{e.deleteShader(o)},l={gl:e.gl,gls:o,destroy(){a(this.gl)}};return n&&S.register(l,{finalizer:a,gl:e.gl}),l}function R(e,t={}){let i=null;const s=[],a=t.depthStencil?t.depthStencil.texture:null,l=a&&(0,o.IO)(a.format)||!1;if(t.colors&&t.colors.length){i=e.gl.createFramebuffer(),e.gl.bindFramebuffer(r.fjQ,i);for(let i=0;i<t.colors.length;++i)t.colors[i].view.texture.samples>1?e.gl.framebufferRenderbuffer(r.fjQ,r.Z$E+i,r.bW,t.colors[i].view.texture.glrb):x(e.gl,r.Z$E+i,t.colors[i].view);t.colors.length>1&&e.gl.drawBuffers(t.colors.map(((e,t)=>r.Z$E+t))),a&&(a.glrb?e.gl.framebufferRenderbuffer(r.fjQ,l?r.TU:r.Ec0,r.bW,a.glrb):x(e.gl,l?r.TU:r.Ec0,t.depthStencil));for(let i=0;i<t.colors.length;++i)s.push(t.colors[i].view.texture.samples>1?B(e.gl,r.Z$E,t.colors[i].view):null);s.push(a&&a.samples>1&&a.glt?B(e.gl,l?r.TU:r.Ec0,t.depthStencil):null)}const c=e=>{e.deleteFramebuffer(i);for(const t of s)e.deleteFramebuffer(t)},u={gl:e.gl,glfb:i,glrfb:s,depth:a,color:t.colors?t.colors.map((e=>e.view.texture)):[],clearColors:t.colors?t.colors.map((e=>e.clear)):[],clearColor:t.clearColor,clearDepth:t.clearDepth,clearStencil:t.clearStencil,destroy(){c(this.gl)}};return n&&S.register(u,{finalizer:c,gl:e.gl}),u}function T(e,t){return{entries:t.entries.map(((e,t)=>({binding:t,...e}))),destroy(){}}}function O(e,t){return{entries:t.entries.map(((e,t)=>({binding:t,...e}))),destroy(){}}}function A(e,t){const i=function(e,t,i){const n=e.gl.createProgram();return e.gl.attachShader(n,t),e.gl.attachShader(n,i),e.gl.linkProgram(n),n}(e,t.vertex.gls,t.fragment.gls),o=[],a={};let l=0,c=0;if(t.bindGroups){for(let n=0;n<t.bindGroups.length;++n){const u=t.bindGroups[n].entries;o.push([]);for(let t=0;t<u.length;++t){const d=u[t];let f=null,h=r.EP2;d.type===s.$l.Buffer?(h=e.gl.getUniformBlockIndex(i,d.label),e.gl.uniformBlockBinding(i,h,l++)):d.type===s.$l.Texture&&(f=e.gl.getUniformLocation(i,d.label),a[d.label]=c++),o[n][d.binding]={...d,loc:f,index:h,slot:d.type===s.$l.Buffer?l-1:d.type===s.$l.Texture?c-1:0}}}for(let e=0;e<t.bindGroups.length;++e){const i=t.bindGroups[e].entries;for(let t=0;t<i.length;++t)i[t].type===s.$l.Sampler&&a[i[t].label]&&(o[e][i[t].binding].slot=a[i[t].label])}}const u=e=>{e.deleteProgram(i)},f={gl:e.gl,glp:i,buffers:t.buffers,cache:o,state:d(t),destroy(){u(this.gl)}};return n&&S.register(f,{finalizer:u,gl:e.gl}),f}function _(e,t,i,n=0){e.gl.bindBuffer(t.type,t.glb),e.gl.bufferSubData(t.type,n,i)}function G(e,t,i=r.wdg){e.gl.activeTexture(r.VKS),e.gl.bindTexture(t.type,t.glt),e.gl.hint(r.jpO,i),e.gl.generateMipmap(t.type)}function I(e,{src:t,origin:[i,n]=[0,0]},{texture:s,mipLevel:a=0,origin:[l,c,u]=[0,0,0]},[d,f]=[t.width-i,t.height-n]){const h=function(e){switch(e){case r.R8:case r.LrX:case r.$mf:case r.coM:case r.hw6:case r.jnw:case r.r5A:return r.wgU;case r.sVf:case r.q6i:case r.wAm:case r.LGL:case r.Mgl:case r.Qjo:return r.d93;case r.iVF:case r.ZLz:case r.rxK:return r.Ae4;case r.xiM:case r.qB9:case r.Msg:return r.QoO;case r.If2:case r.m89:case r.Rkd:return r.r1O;case r.$oc:case r.nR4:case r.gtH:return r.bBe;case r.blh:return r.fa2;case r.WsI:case r.MJi:case r._hT:return r.s_k;case r.h2H:case r.qed:case r.Nug:return r.RFu;case r.Khk:return r.JpA;case r.kv5:return r.Ae4;case r.d_Y:return r.r1O;case r.ABS:return r.mLJ;case r.dj5:return r.RFu;case r.Vwh:return r.EZf}return r.Hnw}(s.format),p=s.type===r.Ep7?r._fi+u:s.type;e.gl.activeTexture(r.VKS),e.gl.bindTexture(s.type,s.glt),e.gl.pixelStorei(r.u$q,i),e.gl.pixelStorei(r.Sr6,n),e.gl.pixelStorei(r.mku,0),e.gl.pixelStorei(r.AAP,0),(0,o.cj)(s.type)?e.gl.texSubImage3D(p,a,l,c,u,d,f,1,s.format,h,t):e.gl.texSubImage2D(p,a,l,c,d,f,function(e){switch(e){case r.R8:case r.sVf:case r.WsI:case r.h2H:return r.hMC;case r.LrX:case r.q6i:case r.iVF:case r.xiM:case r.If2:case r.$oc:return r.vPF;case r.$mf:case r.wAm:case r.MJi:case r.qed:return r.RG;case r.coM:case r.LGL:case r.ZLz:case r.qB9:case r.m89:case r.nR4:return r.BIZ;case r.hw6:case r.jnw:case r.Mgl:case r.blh:case r._hT:case r.Nug:return r.VS8;case r.r5A:case r.Qjo:case r.rxK:case r.Rkd:case r.Msg:case r.gtH:return r.SE0;case r.Khk:return r.eXq;case r.kv5:case r.d_Y:case r.dj5:return r.Mh0;case r.ABS:case r.Vwh:return r.U0z}return r.Hnw}(s.format),h,t)}function E(e,t){let i=e.gl.drawingBufferWidth,n=e.gl.drawingBufferHeight;t.color.length&&(i=t.color[0].width,n=t.color[0].height),e.gl.bindFramebuffer(r.fjQ,t.glfb),e.gl.viewport(0,0,i,n),e.gl.depthRange(0,1),e.state.scissor&&(e.state.scissor=!1,b(e.gl,r.yN1,!1));let o=0;if(isNaN(t.clearDepth)||(o|=r.yXb,e.gl.clearDepth(t.clearDepth),v(e.gl,e.state.state.depthWrite,!0),e.state.state.depthWrite=!0),isNaN(t.clearStencil)||(o|=r.ecp,e.gl.clearStencil(t.clearStencil),m(e.gl,e.state.state.stencilWriteMask,w),e.state.state.stencilWriteMask=w),g(e.gl,e.state.state.blendWriteMask,s.Yw.All),e.state.state.blendWriteMask=s.Yw.All,t.color.length){for(let i=0;i<t.color.length;++i)if(t.clearColors[i]){const n=a(t.color[i].format);n===r.bBe?e.gl.clearBufferiv(r.r$7,i,t.clearColors[i]):n===r.r1O?e.gl.clearBufferuiv(r.r$7,i,t.clearColors[i]):e.gl.clearBufferfv(r.r$7,i,t.clearColors[i])}}else t.clearColor&&(o|=r._Hr,e.gl.clearColor(...t.clearColor));o&&e.gl.clear(o),e.pass=t}function $(e,t={}){e.gl.bindFramebuffer(r.fjQ,null),e.gl.viewport(0,0,e.gl.drawingBufferWidth,e.gl.drawingBufferHeight),e.gl.depthRange(0,1),e.state.scissor&&(e.state.scissor=!1,b(e.gl,r.yN1,!1));let i=0;isNaN(t.clearDepth)||(i|=r.yXb,e.gl.clearDepth(t.clearDepth),v(e.gl,e.state.state.depthWrite,!0),e.state.state.depthWrite=!0),isNaN(t.clearStencil)||(i|=r.ecp,e.gl.clearStencil(t.clearStencil),m(e.gl,e.state.state.stencilWriteMask,w),e.state.state.stencilWriteMask=w),t.clearColor&&(i|=r._Hr,e.gl.clearColor(...t.clearColor),g(e.gl,e.state.state.blendWriteMask,s.Yw.All),e.state.state.blendWriteMask=s.Yw.All),i&&e.gl.clear(i),e.pass=null}function X(e){if(e.pass){for(let t=0;t<e.pass.color.length;++t)e.pass.glrfb[t]&&y(e.gl,e.pass.glfb,e.pass.glrfb[t],e.pass.color[t],r._Hr,r.Z$E+t);const t=e.pass.glrfb[e.pass.glrfb.length-1];e.pass.depth&&t&&y(e.gl,e.pass.glfb,t,e.pass.depth,r.yXb|r.ecp)}e.pass=null}function L(e,t){if(e.state.pipeline===t)return;e.state.pipeline&&e.state.pipeline.glp===t.glp||e.gl.useProgram(t.glp),h(e.gl,e.extDrawBuffersi,e.state.state,t.state,e.state.stencilRef),Object.assign(e.state.state,t.state);const i=[];for(const{attributes:t}of e.state.buffers)for(const{ptr:e}of t)i[e[0]]=1;e.state.buffers=Array(t.buffers.length);for(let n=0;n<t.buffers.length;++n){const{attributes:r,stride:s,stepMode:a=0}=t.buffers[n],l=[];e.state.buffers[n]={glb:null,attributes:l,stride:s,step:a,offset:0,instanceOffset:0};for(const{format:e,offset:t,shaderLocation:c}of r)i[c]=(i[c]||0)+2,l.push({buffer:n,ptr:[c,(0,o.Xm)(e),(0,o.S5)(e),(0,o.bA)(e),s,t],step:a})}for(let t=0;t<i.length;++t)2===i[t]?e.gl.enableVertexAttribArray(t):1===i[t]&&e.gl.disableVertexAttribArray(t);e.state.pipeline=t}function z(e,t){t.glb!==e.state.index&&e.gl.bindBuffer(r.cXR,e.state.index=t.glb)}function q(e,t,i,n=0){const r=e.state.buffers[t];!r||r.glb===i.glb&&r.offset===n||(r.glb=i.glb,r.offset=n,r.instanceOffset=0,F(e.gl,r,n))}function W(e,t,i,n=[]){if(e.state.pipeline)for(let s=0,o=0;s<i.entries.length;++s){const a=i.entries[s],l=e.state.pipeline.cache[t]&&e.state.pipeline.cache[t][a.binding];if(l)if(a.buffer){let t=a.bufferOffset||0;l.bufferDynamicOffset&&(t+=n[o]||0,++o),e.gl.bindBufferRange(r.MfQ,l.slot,a.buffer.glb,t,a.bufferSize||a.buffer.size-t)}else a.texture?(e.gl.activeTexture(r.VKS+l.slot),e.gl.bindTexture(a.texture.type,a.texture.glt),e.gl.uniform1i(l.loc,l.slot)):a.sampler&&e.gl.bindSampler(l.slot,a.sampler.gls)}}function V(e,t,i=1,n=0,r=0){for(const t of e.state.buffers)t.step&&t.instanceOffset!==r&&(t.instanceOffset=r,F(e.gl,t,r*t.stride));e.gl.drawArraysInstanced(e.state.state.topology,n,t,i)}function Y(e,t,i=1,n=0,r=0){for(const t of e.state.buffers)t.step&&t.instanceOffset!==r&&(t.instanceOffset=r,F(e.gl,t,r*t.stride));e.gl.drawElementsInstanced(e.state.state.topology,t,e.state.state.indexFormat,n*(0,o.Ij)(e.state.state.indexFormat),i)}function j(e,t){if(e.state.stencilRef!==t){const{stencilFrontCompare:i,stencilBackCompare:n,stencilReadMask:s}=e.state.state;e.gl.stencilFuncSeparate(r.kpY,i,t,s),e.gl.stencilFuncSeparate(r.FoO,n,t,s),e.state.stencilRef=t}}n&&(S=new FinalizationRegistry((({finalizer:e,gl:t})=>{e(t)})))},513:(e,t,i)=>{i.d(t,{N:()=>n,T:()=>r});const n={TextureAnisotropic:1,TextureHalfFloatLinear:2,TextureFloatLinear:4,ColorBufferFloat:8,DrawBuffersIndexed:16},r={1:"EXT_texture_filter_anisotropic",2:"OES_texture_half_float_linear",4:"OES_texture_float_linear",8:"EXT_color_buffer_float",16:"OES_draw_buffers_indexed"}},544:(e,t,i)=>{i.d(t,{$X9:()=>Ue,$mf:()=>Et,$oc:()=>jt,$sD:()=>$e,AAP:()=>tt,ABS:()=>Rt,Ae4:()=>Q,BIZ:()=>Gt,BjA:()=>F,Brs:()=>ge,Bxn:()=>Oe,BzQ:()=>pe,C4F:()=>le,C6Q:()=>Fe,CW:()=>L,Cip:()=>ai,DXJ:()=>de,DuX:()=>A,EP2:()=>si,EPl:()=>vt,EZf:()=>Pt,Ec0:()=>Ve,Elr:()=>I,Ep7:()=>Ae,Erx:()=>o,F_0:()=>P,Fcx:()=>ae,FoO:()=>O,GPd:()=>ce,HI8:()=>oe,HiH:()=>ot,Hnw:()=>je,If2:()=>Jt,J51:()=>nt,J57:()=>me,Jhs:()=>w,JpA:()=>bt,KTj:()=>S,KXm:()=>at,Khk:()=>mt,LGL:()=>Nt,LOg:()=>ut,LRx:()=>ke,LrX:()=>Wt,M$f:()=>ve,MBW:()=>U,MJi:()=>Lt,MfQ:()=>ri,Mgl:()=>ni,Mh0:()=>ie,Msg:()=>wt,NRq:()=>j,Nug:()=>pt,OAz:()=>v,Oxh:()=>Me,PB6:()=>x,Q0U:()=>D,QPP:()=>c,Qjo:()=>St,QoO:()=>K,R8:()=>It,RFu:()=>te,RG:()=>_t,Rb8:()=>y,RcM:()=>be,Rkd:()=>xt,SE0:()=>kt,Sr6:()=>Je,TMl:()=>m,TU:()=>Ye,T_I:()=>q,Tr1:()=>it,U0z:()=>qe,Ukp:()=>a,VGh:()=>ye,VKS:()=>Ge,VS8:()=>re,Vwh:()=>Ct,WsI:()=>$t,Xeo:()=>Pe,YMo:()=>se,Z$E:()=>We,ZLz:()=>Qt,_Hr:()=>s,_fi:()=>_e,_hT:()=>gt,aRZ:()=>Ie,b0H:()=>u,bBe:()=>Z,bW:()=>Le,blh:()=>Ze,brc:()=>h,cMJ:()=>oi,cXR:()=>C,cgb:()=>l,coM:()=>Ht,d8P:()=>W,d93:()=>N,d_Y:()=>ct,dj5:()=>Mt,eXq:()=>ne,ecp:()=>r,fRZ:()=>X,fa2:()=>rt,fjQ:()=>Xe,fqf:()=>ht,gUF:()=>ue,gYZ:()=>$,gq9:()=>Y,gtH:()=>Ft,h2H:()=>Xt,hMC:()=>Ke,hw6:()=>Qe,hy5:()=>g,i$_:()=>p,iFn:()=>fe,iHR:()=>z,iVF:()=>Yt,iXE:()=>Ot,jX6:()=>we,jgr:()=>xe,jnw:()=>ft,jpO:()=>J,k2X:()=>lt,kdr:()=>R,kpY:()=>T,kv5:()=>ze,ldG:()=>k,m89:()=>ei,mLJ:()=>Ut,mYe:()=>Ee,miX:()=>B,mku:()=>et,n4e:()=>Re,nR4:()=>Zt,nT3:()=>G,nbD:()=>Te,njp:()=>b,nl2:()=>Be,pge:()=>st,q0S:()=>Ce,q6i:()=>qt,qB9:()=>Kt,qOY:()=>M,qed:()=>zt,r$7:()=>He,r1O:()=>ee,r5A:()=>yt,rxK:()=>Bt,ryP:()=>f,sVf:()=>ti,s_k:()=>At,t$R:()=>Se,u$q:()=>Ne,uvM:()=>_,vPF:()=>Dt,vkJ:()=>he,w0M:()=>dt,wAm:()=>ii,wFH:()=>De,wdg:()=>V,wgU:()=>H,xEJ:()=>d,xWx:()=>Tt,xiM:()=>Vt,yN1:()=>E,yXb:()=>n});const n=256,r=1024,s=16384,o=0,a=1,l=3,c=4,u=5,d=0,f=1,h=768,p=769,g=770,v=771,m=772,b=773,x=774,B=775,y=776,F=32774,w=32778,S=32779,D=32769,k=32770,M=34962,C=34963,P=35040,U=35044,R=35048,T=1028,O=1029,A=2884,_=3042,G=2960,I=2929,E=3089,$=32823,X=32926,L=2304,z=2305,q=3317,W=3333,V=4352,Y=4353,j=4354,J=33170,N=5120,H=5121,K=5122,Q=5123,Z=5124,ee=5125,te=5126,ie=6402,ne=6407,re=6408,se=35632,oe=35633,ae=34921,le=512,ce=513,ue=514,de=515,fe=516,he=517,pe=518,ge=519,ve=7680,me=7681,be=7682,xe=7683,Be=5386,ye=34055,Fe=34056,we=9728,Se=9729,De=9984,ke=9985,Me=9986,Ce=9987,Pe=10240,Ue=10241,Re=10242,Te=10243,Oe=3553,Ae=34067,_e=34069,Ge=33984,Ie=10497,Ee=33071,$e=33648,Xe=36160,Le=36161,ze=33189,qe=34041,We=36064,Ve=36096,Ye=33306,je=0,Je=3315,Ne=3316,He=6144,Ke=6403,Qe=32856,Ze=32857,et=32877,tt=32878,it=32879,nt=32882,rt=33640,st=33082,ot=33083,at=32775,lt=32776,ct=33190,ut=34892,dt=34893,ft=35907,ht=34894,pt=34836,gt=34842,vt=35866,mt=35898,bt=35899,xt=36208,Bt=36214,yt=36220,Ft=36226,wt=36232,St=36238,Dt=36244,kt=36249,Mt=36012,Ct=36013,Pt=36269,Ut=34042,Rt=35056,Tt=36008,Ot=36009,At=5131,_t=33319,Gt=33320,It=33321,Et=33323,$t=33325,Xt=33326,Lt=33327,zt=33328,qt=33329,Wt=33330,Vt=33331,Yt=33332,jt=33333,Jt=33334,Nt=33335,Ht=33336,Kt=33337,Qt=33338,Zt=33339,ei=33340,ti=36756,ii=36757,ni=36759,ri=35345,si=4294967295,oi=34046,ai=34047},720:(e,t,i)=>{i.d(t,{$X:()=>f,$l:()=>m,EV:()=>l,FB:()=>r,Kz:()=>g,OB:()=>c,Wf:()=>h,X9:()=>u,Yw:()=>o,dV:()=>b,gB:()=>v,kd:()=>a,oD:()=>x,v2:()=>s,wb:()=>d,xS:()=>p});var n=i(544);const r={Index:16,Vertex:32,Uniform:64,Dynamic:4096,Stream:8192},s={TextureBinding:4,RenderAttachment:16},o={Red:1,Green:2,Blue:4,Alpha:8,All:15},a={D2:n.Bxn,D2Array:n.EPl,CubeMap:n.Ep7,D3:n.Tr1},l={R8:n.R8,R8SNORM:n.sVf,R8UI:n.LrX,R8I:n.q6i,R16UI:n.iVF,R16I:n.xiM,RG8:n.$mf,RG8SNORM:n.wAm,RG8UI:n.coM,RG8I:n.LGL,R32UI:n.If2,R32I:n.$oc,RG16UI:n.ZLz,RG16I:n.qB9,RGBA8:n.hw6,SRGBA8:n.jnw,RGBA8SNORM:n.Mgl,RGBA8UI:n.r5A,RGBA8I:n.Qjo,RGB10A2:n.blh,RG32UI:n.m89,RG32I:n.nR4,RGBA16UI:n.rxK,RGBA16I:n.Msg,RGBA32UI:n.Rkd,RGBA32I:n.gtH,R16F:n.WsI,RG16F:n.MJi,RG11B10F:n.Khk,RGBA16F:n._hT,R32F:n.h2H,RG32F:n.qed,RGBA32F:n.Nug,Depth16:n.kv5,Depth24:n.d_Y,Depth24Stencil8:n.ABS,Depth32F:n.dj5,Depth32FStencil8:n.Vwh},c={ClampToEdge:n.mYe,Repeat:n.aRZ,MirrorRepeat:n.$sD},u={Nearest:n.jX6,Linear:n.t$R},d={Never:n.C4F,Less:n.GPd,Equal:n.gUF,LessEqual:n.DXJ,Greater:n.iFn,NotEqual:n.vkJ,GreaterEqual:n.BzQ,Always:n.Brs},f={Vertex:1,Fragment:2},h=(n.Erx,n.Ukp,n.cgb,n.QPP,n.b0H,n.Ae4,n.r1O,n.iHR,n.CW,{None:n.Hnw,Front:n.kpY,Back:n.FoO}),p={Keep:n.M$f,Zero:n.xEJ,Replace:n.J57,Invert:n.nl2,Increment:n.RcM,Decrement:n.jgr,IncrementWrap:n.VGh,DecrementWrap:n.C6Q},g=(n.xEJ,n.ryP,n.brc,n.i$_,n.hy5,n.OAz,n.PB6,n.miX,n.TMl,n.njp,n.Rb8,n.Q0U,n.ldG,n.BjA,n.Jhs,n.KTj,n.KXm,n.k2X,{Vertex:0,Instance:1}),v={UI8x2:274,UI8x4:276,I8x2:4370,I8x4:4372,UNORM8x2:8466,UNORM8x4:8468,SNORM8x2:12562,SNORM8x4:12564,UI16x2:290,UI16x4:292,I16x2:4386,I16x4:4388,UNORM16x2:8482,UNORM16x4:8484,SNORM16x2:12578,SNORM16x4:12580,F16x2:546,F16x4:548,F32:577,F32x2:578,F32x3:579,F32x4:580},m={Buffer:0,Sampler:1,Texture:2},b={Filtering:0,NonFiltering:1,Comparison:2},x={Float:0,Depth:1,Int:2,UInt:3};n.gq9,n.NRq},232:(e,t,i)=>{i.d(t,{EC:()=>f,IO:()=>h,Ij:()=>o,O5:()=>d,S5:()=>c,Xm:()=>l,bA:()=>u,cj:()=>s});var n=i(544),r=i(720);function s(e){return e===n.Tr1||e===n.EPl}function o(e){return e===n.Ae4?2:4}function a(e){return(e>>4&15)*l(e)}function l(e){return 15&e}function c(e){switch(e>>4&511){case 36:return n.RFu;case 34:return n.s_k;case 274:return n.QoO;case 273:return n.d93;case 18:return n.Ae4;case 17:return n.wgU}return n.Hnw}function u(e){return!!(e>>13)}function d(e){let t=0;const i=[];for(let n=0;n<e.length;++n){const s=[];let o=0;for(let i=0;i<e[n].attributes.length;++i){const r=e[n].attributes[i];s.push({format:r,offset:o,shaderLocation:t}),o+=a(r),++t}i.push({attributes:s,stride:o,stepMode:e[n].instanced?r.Kz.Instance:r.Kz.Vertex})}return i}function f(e){switch(e){case n.kv5:case n.d_Y:case n.ABS:case n.dj5:case n.Vwh:return!0}return!1}function h(e){switch(e){case n.ABS:case n.Vwh:return!0}return!1}},764:(e,t,i)=>{i.d(t,{AF:()=>n.AF,BK:()=>n.BK,C7:()=>n.C7,CS:()=>n.CS,Cf:()=>n.Cf,Dx:()=>n.Dx,E5:()=>n.E5,EX:()=>n.EX,EY:()=>n.EY,FE:()=>n.FE,FL:()=>n.FL,Fb:()=>n.Fb,IL:()=>n.IL,Jj:()=>n.Jj,Ko:()=>n.Ko,Me:()=>n.Me,Ow:()=>n.Ow,PM:()=>n.PM,QB:()=>n.QB,RS:()=>n.RS,U3:()=>n.U3,WS:()=>n.WS,ZM:()=>n.ZM,bo:()=>n.bo,ci:()=>n.ci,eu:()=>n.eu,gK:()=>n.gK,hw:()=>n.hw,hx:()=>n.hx,ii:()=>n.ii,kS:()=>n.kS,kb:()=>n.kb,uH:()=>n.uH,uq:()=>n.uq,wx:()=>n.wx,y9:()=>n.y9,z0:()=>n.z0});var n=i(837)},837:(e,t,i)=>{i.d(t,{hx:()=>j,PM:()=>Y,gK:()=>V,ZM:()=>L,uH:()=>X,AF:()=>G,Ow:()=>q,Me:()=>z,QB:()=>E,wx:()=>$,U3:()=>I,Ko:()=>D,WS:()=>D,EY:()=>D,Fb:()=>_,Dx:()=>C,FL:()=>D,E5:()=>D,hw:()=>D,y9:()=>D,FE:()=>D,ii:()=>Z,ci:()=>ee,Cf:()=>R,uq:()=>M,kS:()=>U,Jj:()=>P,kb:()=>A,IL:()=>Q,GH:()=>k,BK:()=>H,EX:()=>N,eu:()=>te,RS:()=>K,z0:()=>J,C7:()=>O,CS:()=>T,bo:()=>W});const n=2097151,r=2**32;function s(e,t){return(t&n)*r+(e>>>0)}function o(e){return e>>>0}class a{generations=[];freeList=[];get size(){return this.generations.length-this.freeList.length}clear(){this.generations.length=0,this.freeList.length=0}create(){let e,t;return this.freeList.length>0?(e=this.freeList.pop(),t=Math.abs(this.generations[e]),this.generations[e]=t):(e=this.generations.length,t=e?0:1,this.generations.push(t)),s(e,t)}delete(e){if(!this.has(e))return!1;const t=o(e);let i=this.generations[t]+1&n;return i||++i,this.generations[t]=-i,this.freeList.push(t),!0}has(e){return o(e)<this.generations.length&&function(e){return e/r&n}(e)===this.generations[o(e)]}forEach(e,t){for(const i of this.values())e.call(t,i,i,this)}*entries(){for(const e of this.values())yield[e,e]}keys(){return this.values()}*values(){for(let e=0;e<this.generations.length;++e){const t=this.generations[e];this.generations[e]>=0&&(yield s(e,t))}}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return a.name}}class l{ids=new a;data=[];get size(){return this.ids.size}add(e){const t=this.ids.create();return this.data[o(t)]=e,t}clear(){this.ids.clear(),this.data.length=0}delete(e){return!!this.ids.delete(e)&&(delete this.data[o(e)],!0)}get(e){return this.ids.has(e)?this.data[o(e)]:void 0}has(e){return this.ids.has(e)}set(e,t){return this.ids.has(e)&&(this.data[o(e)]=t),this}forEach(e,t){this.ids.forEach((i=>{e.call(t,this.data[o(i)],i,this)}))}*entries(){for(const e of this.ids.values())yield[e,this.data[o(e)]]}keys(){return this.ids.values()}*values(){for(const e of this.ids.values())yield this.data[o(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return l.name}}var c=i(720),u=i(709);const d=new TextDecoder("utf-8");let f=new DataView(new ArrayBuffer(0));function h(e){return f.buffer!==e.buffer&&(f=new DataView(e.buffer)),f}function p(e,t,i){return d.decode(new Uint8Array(e.buffer,t,i))}const g={},v=(new l,new l),m={},b=new l,x={},B={},y=new l,F={};function w(e){return g[e].memory}function S(e){return w(F[e])}function D(e){const t=y.get(e);t&&(t.destroy(),y.delete(e))}function k(e,t){(g[e]=g[e]||{memory:null}).memory=t}function M(e,t,i){const n=p(w(e),t,i);if(m[n])return m[n];const r=document.getElementById(n);return r?m[n]=v.add(r):0}function C(e){v.delete(e)}function P(e){return v.get(e)?.width||0}function U(e){return v.get(e)?.height||0}function R(e,t,i){const n=p(w(e),t,i);if(x[n])return x[n];const r=document.getElementById(n);if(!r)return 0;const s=x[n]=b.add(r);return B[s]=e,s}function T(e,t,i){const n=b.get(e);if(n){const s=u.hS(n,{alpha:!!(1&(r=t)),antialias:!!(2&r),depth:!!(4&r),desynchronized:!!(8&r),failIfMajorPerformanceCaveat:!!(16&r),powerPreference:32&r?"high-performance":"low-power",premultipliedAlpha:!!(64&r),preserveDrawingBuffer:!!(128&r),stencil:!!(256&r)},i);if(s){const t=y.add(s);return F[t]=B[e],t}}var r;return 0}function O(e,t,i){u.zd(y.get(e),y.get(t),i)}function A(e){u.zI(y.get(e))}function _(e){D(e),delete F[e]}function G(e,t,i){const n=u.gS(y.get(e),{size:t>>>0,usage:i>>>0});return y.add(n)}function I(e,t,i,n,r,s,o,a,l){const c=u.cU(y.get(e),{size:[t>>>0,i>>>0,n>>>0],mipLevelCount:r>>>0,sampleCount:s>>>0,dimension:o>>>0,format:a>>>0,usage:l>>>0});return y.add(c)}function E(e,t,i,n,r,s,o,a,l,c,d){const f=u.bb(y.get(e),{addressModeU:t>>>0,addressModeV:i>>>0,addressModeW:n>>>0,magFilter:r>>>0,minFilter:s>>>0,mipmapFilter:o>>>0,lodMinClamp:a,lodMaxClamp:l,compare:c>>>0,maxAnisotropy:d>>>0});return y.add(f)}function $(e,t,i,n){const r=u.ef(y.get(e),{code:p(S(e),t,i),usage:n>>>0});return y.add(r)}function X(e,t,i){const n=S(e),r=[];for(let e=0;e<i;e++){const i=t+32*e,s=h(n).getUint32(i+0,!0),o=h(n).getUint32(i+4,!0),a=h(n).getUint8(i+16);let l=!1,u=c.dV.Filtering,d=c.oD.Float,f=c.kd.D2,g=!1;switch(a){case c.$l.Buffer:l=!!h(n).getUint8(i+20);break;case c.$l.Sampler:u=h(n).getUint32(i+20,!0)>>>0;break;case c.$l.Texture:d=h(n).getUint32(i+20,!0)>>>0,f=h(n).getUint32(i+24,!0)>>>0,g=!!h(n).getUint8(i+28);break;default:throw new RangeError("invalid variant discriminant for BindingType")}r.push({label:p(n,s,o),binding:h(n).getUint32(i+8,!0)>>>0,visibility:h(n).getUint32(i+12,!0)>>>0,type:a,bufferDynamicOffset:l,samplerType:u,textureSampleType:d,textureDimension:f,textureMultisampled:g})}const s=u.mM(y.get(e),{entries:r});return y.add(s)}function L(e,t,i,n){const r=S(e),s=[];for(let e=0;e<n;e++){const t=i+24*e;let n=null,o=0,a=0,l=null,u=null;switch(h(r).getUint8(t+4)){case c.$l.Buffer:n=y.get(h(r).getFloat64(t+8,!0)),o=h(r).getUint32(t+16,!0),a=h(r).getUint32(t+20,!0);break;case c.$l.Sampler:l=y.get(h(r).getFloat64(t+8,!0));break;case c.$l.Texture:u=y.get(h(r).getFloat64(t+8,!0));break;default:throw new RangeError("invalid variant discriminant for BindingResource")}s.push({binding:h(r).getUint32(t+0,!0),buffer:n,bufferOffset:o,bufferSize:a,sampler:l,texture:u})}const o=u.J3(y.get(e),{layout:y.get(t),entries:s});return y.add(o)}function z(e,t,i,n,r,s,o,a,l,c,d,f,p,g,v,m,b,x,B,F,w,D,k,M,C,P,U,R,T,O,A,_,G,I,E,$,X,L,z,q,W){const V=S(e),Y=[];for(let e=0;e<r;e++){const t=n+12*e;Y.push({format:h(V).getUint32(t+0,!0),offset:h(V).getUint32(t+4,!0),shaderLocation:h(V).getUint32(t+8,!0)})}const j=[];for(let e=0;e<o;e++){const t=s+16*e,i=h(V).getUint32(t+0,!0),n=h(V).getUint32(t+4,!0);j.push({attributes:Y.slice(i,i+n),stride:h(V).getUint32(t+8,!0),stepMode:h(V).getUint32(t+12,!0)})}const J=[];for(let e=0;e<l;e++){const t=a+8*e;J.push(y.get(h(V).getFloat64(t+0,!0)))}const N=[];for(let e=0;e<I;e++){const t=G+32*e;N.push({format:h(V).getUint32(t+0,!0)>>>0,writeMask:h(V).getUint32(t+4,!0)>>>0,blendColor:{operation:h(V).getUint32(t+8,!0)>>>0,srcFactor:h(V).getUint32(t+12,!0)>>>0,dstFactor:h(V).getUint32(t+16,!0)>>>0},blendAlpha:{operation:h(V).getUint32(t+20,!0)>>>0,srcFactor:h(V).getUint32(t+24,!0)>>>0,dstFactor:h(V).getUint32(t+28,!0)>>>0}})}const H=u.F0(y.get(e),{vertex:y.get(t),fragment:y.get(i),buffers:j,bindGroups:J,primitive:{topology:c>>>0,indexFormat:d>>>0,frontFace:f>>>0,cullMode:p>>>0},multisample:{sampleCount:g>>>0,alphaToCoverage:!!v},depthStencil:m?{format:b>>>0,depthWrite:!!x,depthCompare:B>>>0,stencilFront:{compare:F>>>0,failOp:w>>>0,depthFailOp:D>>>0,passOp:k>>>0},stencilBack:{compare:M>>>0,failOp:C>>>0,depthFailOp:P>>>0,passOp:U>>>0},stencilReadMask:R>>>0,stencilWriteMask:T>>>0,depthBias:O,depthBiasSlopeScale:A,depthBiasClamp:_}:null,targets:{writeMask:E>>>0,blendColor:{operation:$>>>0,srcFactor:X>>>0,dstFactor:L>>>0},blendAlpha:{operation:z>>>0,srcFactor:q>>>0,dstFactor:W>>>0},targets:N}});return y.add(H)}function q(e,t,i,n,r,s,o,a,l,c,d,f,p){const g=S(e);let v;switch(a){case 0:v={clearDepth:t,clearStencil:i,clearColor:isNaN(n)?null:[n,r,s,o]};break;case 1:{const e=[];for(let t=0;t<p;t++){const i=f+32*t,n=[h(g).getFloat32(i+16,!0),h(g).getFloat32(i+20,!0),h(g).getFloat32(i+24,!0),h(g).getFloat32(i+28,!0)];e.push({view:{texture:y.get(h(g).getFloat64(i+0,!0)),mipLevel:h(g).getUint32(i+8,!0),slice:h(g).getUint32(i+12,!0)},clear:isNaN(n[0])?null:n})}v={clearDepth:t,clearStencil:i,colors:e,depthStencil:{texture:y.get(l),mipLevel:c>>>0,slice:d>>>0}};break}default:throw new RangeError("invalid variant discriminant for RenderPassDescriptor")}const m=u.oR(y.get(e),v);return y.add(m)}function W(e,t,i,n,r){u.F3(y.get(e),y.get(t),new Uint8Array(S(e).buffer.slice(i,i+1*n)),r>>>0)}function V(e,t,i,n,r,s,o,a,l,c,d){u.Yf(y.get(e),{src:v.get(t),origin:[i>>>0,n>>>0]},{texture:y.get(r),mipLevel:s>>>0,origin:[o>>>0,a>>>0,l>>>0]},[c>>>0,d>>>0])}function Y(e,t){u.Us(y.get(e),y.get(t))}function j(e,t,i,n,r,s,o){u.pJ(y.get(e),{clearColor:isNaN(n)?null:[n,r,s,o],clearDepth:t,clearStencil:i})}function J(e){u.X$(y.get(e))}function N(e,t){u.rh(y.get(e),y.get(t))}function H(e,t){u.i3(y.get(e),y.get(t))}function K(e,t,i,n){u.pk(y.get(e),t>>>0,y.get(i),n>>>0)}function Q(e,t,i,n,r){u.yY(y.get(e),t>>>0,y.get(i),new Uint32Array(S(e).buffer.slice(n,n+4*r)))}function Z(e,t,i,n,r){u.ii(y.get(e),t>>>0,i>>>0,n>>>0,r>>>0)}function ee(e,t,i,n,r){u.sO(y.get(e),t>>>0,i>>>0,n>>>0,r>>>0)}function te(e,t){u.IM(y.get(e),t>>>0)}},132:(e,t,i)=>{i.a(e,(async(n,r)=>{try{var s=i(497),o=i(764),a=n([s]),[s]=a.then?(await a)():a;await i.v(t,e.id,"0edb8d3d3141278a31f0",{env:{abort:s.J,seed:s.D},"mugl/wasm":{get_canvas_by_id:o.Cf,webgl_request_device:o.CS,reset_device:o.kb,create_shader:o.wx,create_buffer:o.AF,write_buffer:o.bo,create_render_pipeline:o.Me,create_bind_group_layout:o.uH,create_bind_group:o.ZM,create_texture:o.U3,create_sampler:o.QB,create_render_pass:o.Ow,get_image_by_id:o.uq,copy_external_image_to_texture:o.gK,get_image_width:o.Jj,get_image_height:o.kS,webgl_generate_mipmap:o.C7,delete_bind_group_layout:o.WS,begin_default_pass:o.hx,set_render_pipeline:o.EX,set_vertex:o.RS,draw:o.ii,submit_render_pass:o.z0,set_index:o.BK,set_bind_group:o.IL,draw_indexed:o.ci,begin_render_pass:o.PM,set_stencil_ref:o.eu,delete_render_pipeline:o.E5,delete_bind_group:o.Ko,delete_texture:o.FE,delete_sampler:o.hw,delete_buffer:o.EY,delete_image:o.Dx,delete_device:o.Fb,delete_shader:o.y9,delete_render_pass:o.FL}}),r()}catch(e){r(e)}}),1)}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={id:e,exports:{}};return r[e](i,i.exports,o),i.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(r,s,o)=>{var a;o&&((a=[]).d=1);var l,c,u,d=new Set,f=r.exports,h=new Promise(((e,t)=>{u=t,c=e}));h[t]=f,h[e]=e=>(a&&e(a),d.forEach(e),h.catch((e=>{}))),r.exports=h,s((r=>{var s;l=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var s=[];s.d=0,r.then((e=>{o[t]=e,n(s)}),(e=>{o[i]=e,n(s)}));var o={};return o[e]=e=>e(s),o}}var a={};return a[e]=e=>{},a[t]=r,a})))(r);var o=()=>l.map((e=>{if(e[i])throw e[i];return e[t]})),c=new Promise((t=>{(s=()=>t(o)).r=0;var i=e=>e!==a&&!d.has(e)&&(d.add(e),e&&!e.d&&(s.r++,e.push(s)));l.map((t=>t[e](i)))}));return s.r?c:o()}),(e=>(e?u(h[i]=e):c(f),n(a)))),a&&(a.d=0)},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.v=(e,t,i,n)=>{var r=fetch(o.p+""+i+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(r,n).then((t=>Object.assign(e,t.instance.exports))):r.then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,n))).then((t=>Object.assign(e,t.instance.exports)))},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!e;)e=i[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),o(440)})();