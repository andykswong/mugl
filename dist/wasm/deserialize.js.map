{"version":3,"file":"deserialize.js","names":["UTF8_DECODER","TextDecoder","DATA_VIEW","DataView","ArrayBuffer","dataView","mem","buffer","decodeStr","ptr","len","decode","Uint8Array","toWebGLContextAttributes","flags","alpha","antialias","depth","desynchronized","failIfMajorPerformanceCaveat","powerPreference","premultipliedAlpha","preserveDrawingBuffer","stencil"],"sources":["../../js/wasm/deserialize.ts"],"sourcesContent":["import { Num, UInt } from '../gpu';\n\nexport const UTF8_DECODER = new TextDecoder('utf-8');\n\nlet DATA_VIEW = new DataView(new ArrayBuffer(0));\n\nexport function dataView(mem: WebAssembly.Memory): DataView {\n  if (DATA_VIEW.buffer !== mem.buffer) {\n    DATA_VIEW = new DataView(mem.buffer);\n  }\n  return DATA_VIEW;\n}\n\nexport function decodeStr(mem: WebAssembly.Memory, ptr: number, len: number): string {\n  return UTF8_DECODER.decode(new Uint8Array(mem.buffer, ptr, len));\n}\n\nexport function toWebGLContextAttributes(flags: Num): WebGLContextAttributes {\n  return {\n    alpha: !!((flags as UInt) & 1),\n    antialias: !!((flags as UInt) & (1 << 1)),\n    depth: !!((flags as UInt) & (1 << 2)),\n    desynchronized: !!((flags as UInt) & (1 << 3)),\n    failIfMajorPerformanceCaveat: !!((flags as UInt) & (1 << 4)),\n    powerPreference: ((flags as UInt) & (1 << 5)) ? 'high-performance' : 'low-power',\n    premultipliedAlpha: !!((flags as UInt) & (1 << 6)),\n    preserveDrawingBuffer: !!((flags as UInt) & (1 << 7)),\n    stencil: !!((flags as UInt) & (1 << 8)),\n  };\n}\n"],"mappings":"AAEA,MAAO,MAAMA,aAAY,CAAG,GAAIC,YAAW,CAAC,OAAO,CAAC,CAEpD,GAAIC,UAAS,CAAG,GAAIC,SAAQ,CAAC,GAAIC,YAAW,CAAC,CAAC,CAAC,CAAC,CAEhD,MAAO,SAASC,SAAQ,CAACC,GAAuB,CAAY,CAC1D,GAAIJ,SAAS,CAACK,MAAM,GAAKD,GAAG,CAACC,MAAM,CAAE,CACnCL,SAAS,CAAG,GAAIC,SAAQ,CAACG,GAAG,CAACC,MAAM,CACrC,CACA,MAAOL,UACT,CAEA,MAAO,SAASM,UAAS,CAACF,GAAuB,CAAEG,GAAW,CAAEC,GAAW,CAAU,CACnF,MAAOV,aAAY,CAACW,MAAM,CAAC,GAAIC,WAAU,CAACN,GAAG,CAACC,MAAM,CAAEE,GAAG,CAAEC,GAAG,CAAC,CACjE,CAEA,MAAO,SAASG,yBAAwB,CAACC,KAAU,CAA0B,CAC3E,MAAO,CACLC,KAAK,CAAE,CAAC,EAAGD,KAAK,CAAY,CAAC,CAAC,CAC9BE,SAAS,CAAE,CAAC,EAAGF,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CACzCG,KAAK,CAAE,CAAC,EAAGH,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CACrCI,cAAc,CAAE,CAAC,EAAGJ,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CAC9CK,4BAA4B,CAAE,CAAC,EAAGL,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CAC5DM,eAAe,CAAIN,KAAK,CAAa,CAAC,EAAI,CAAE,CAAI,kBAAkB,CAAG,WAAW,CAChFO,kBAAkB,CAAE,CAAC,EAAGP,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CAClDQ,qBAAqB,CAAE,CAAC,EAAGR,KAAK,CAAa,CAAC,EAAI,CAAE,CAAC,CACrDS,OAAO,CAAE,CAAC,EAAGT,KAAK,CAAa,CAAC,EAAI,CAAE,CACxC,CACF"}