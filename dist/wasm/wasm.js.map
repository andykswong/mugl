{"version":3,"file":"wasm.js","names":["GenerationalArena","BindingType","FutureStatus","SamplerBindingType","TextureDimension","TextureSampleType","WebGL","dataView","decodeStr","toWebGLContextAttributes","contexts","futures","images","imageMap","canvases","canvasMap","canvasContextMap","resources","deviceContextMap","getMemory","context","memory","getDeviceMemory","resource","deleteResource","id","get","destroy","delete","set_context_memory","free_context","get_future_status","future","f","status","Pending","Done","create_image","ptr","len","img","Image","crossOrigin","src","add","get_image_by_id","image","document","getElementById","delete_image","get_image_width","width","get_image_height","height","get_canvas_by_id","canvas","canvasId","get_canvas_width","get_canvas_height","webgl_request_device","attrs","features","device","requestWebGL2Device","deviceId","webgl_generate_mipmap","tex","hint","generateMipmap","reset_device","resetDevice","delete_device","is_device_lost","isDeviceLost","get_device_features","getDeviceFeatures","create_buffer","size","usage","ret","createBuffer","delete_buffer","create_texture","depth","mipLevelCount","sampleCount","dimension","format","createTexture","delete_texture","create_sampler","addressModeU","addressModeV","addressModeW","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","createSampler","delete_sampler","create_shader","codePtr","codeLen","createShader","code","delete_shader","create_bind_group_layout","entriesPtr","entriesLen","entries","i","base","ptr0","getUint32","len0","type","getUint8","bufferDynamicOffset","samplerType","Filtering","textureSampleType","Float","textureDimension","D2","textureMultisampled","Buffer","Sampler","Texture","RangeError","push","label","binding","visibility","createBindGroupLayout","delete_bind_group_layout","create_bind_group","layout","buffer","bufferOffset","bufferSize","sampler","texture","getFloat64","createBindGroup","delete_bind_group","create_render_pipeline","vertex","fragment","attributesPtr","attributesLen","buffersPtr","buffersLen","bindGroupsPtr","bindGroupsLen","topology","indexFormat","frontFace","cullMode","alphaToCoverage","hasDepthStencil","depthStencilFormat","depthWrite","depthCompare","stencilFrontCompare","stencilFrontFailOp","stencilFrontDepthFailOp","stencilFrontPassOp","stencilBackCompare","stencilBackFailOp","stencilBackDepthFailOp","stencilBackPassOp","stencilReadMask","stencilWriteMask","depthBias","depthBiasSlopeScale","depthBiasClamp","colorsPtr","colorsLen","colorWriteMask","blendColorOperation","blendColorSrcFactor","blendColorDstFactor","blendAlphaOperation","blendAlphaSrcFactor","blendAlphaDstFactor","attributes","offset","shaderLocation","buffers","start","slice","stride","stepMode","bindGroups","targets","writeMask","blendColor","operation","srcFactor","dstFactor","blendAlpha","createRenderPipeline","primitive","multisample","depthStencil","stencilFront","failOp","depthFailOp","passOp","stencilBack","delete_render_pipeline","create_render_pass","clearDepth","clearStencil","clearColorRed","clearColorGreen","clearColorBlue","clearColorAlpha","isOffscreen","depthStencilTexture","depthStecilMipLevel","depthStecilSlice","desc","clearColor","isNaN","colors","clear","getFloat32","view","mipLevel","createRenderPass","delete_render_pass","read_buffer","outPtr","readBuffer","Uint8Array","write_buffer","dataPtr","writeBuffer","copy_buffer","dst","srcOffset","dstOffset","copyBuffer","write_texture","x","y","z","dataLen","bytesPerRow","rowsPerImage","writeTexture","origin","copy_external_image_to_texture","srcX","srcY","dstX","dstY","dstZ","copyExternalImageToTexture","copy_texture","srcMipLevel","srcZ","dstMipLevel","copyTexture","copy_texture_to_buffer","copyTextureToBuffer","begin_render_pass","pass","beginRenderPass","begin_default_pass","beginDefaultPass","submit_render_pass","submitRenderPass","set_render_pipeline","pipeline","setRenderPipeline","set_index","index","setIndex","set_vertex","slot","setVertex","set_bind_group","bindGroup","offsetsPtr","offsetsLen","setBindGroup","Uint32Array","draw","vertexCount","instanceCount","firstVertex","firstInstance","draw_indexed","indexCount","firstIndex","drawIndexed","set_viewport","minDepth","maxDepth","setViewport","set_scissor_rect","setScissorRect","set_blend_const","red","green","blue","alpha","setBlendConst","set_stencil_ref","ref","setStencilRef"],"sources":["../../js/wasm/wasm.ts"],"sourcesContent":["import { Arena, GenerationalArena } from '@muds/store';\nimport {\n  AddressMode, BindGroup, BindGroupLayout, BindGroupLayoutEntry, BindingType, Buffer, BufferUsage, Canvas, Color,\n  ColorAttachment, ColorTargetState, CompareFunction, CullMode, Device, FilterMode, Float, FrontFace, Future,\n  FutureStatus, ImageSource, IndexFormat, MipmapHint, PrimitiveTopology, RenderPass, RenderPassDescriptor,\n  RenderPipeline, Resource, Sampler, SamplerBindingType, Shader, ShaderStage, StencilOperation, Texture,\n  TextureDimension, TextureFormat, TextureSampleType, TextureUsage, UInt, VertexAttribute, VertexBufferLayout\n} from '../gpu';\nimport { WebGL } from '../gpu';\nimport { dataView, decodeStr, toWebGLContextAttributes } from './deserialize';\n\nexport type ContextId = number & { readonly __tag: unique symbol };\nexport type FutureId = number & { readonly __tag: unique symbol };\nexport type ImageSourceId = number & { readonly __tag: unique symbol };\nexport type CanvasId = number & { readonly __tag: unique symbol };\nexport type ResourceId = number & { readonly __tag: unique symbol };\n\nconst contexts: Record<ContextId, { memory: WebAssembly.Memory | null }> = {};\nconst futures: Arena<Future, FutureId> = new GenerationalArena<Future, FutureId>();\nconst images: Arena<ImageSource, ImageSourceId> = new GenerationalArena<ImageSource, ImageSourceId>();\nconst imageMap: Record<string, ImageSourceId> = {};\nconst canvases: Arena<Canvas, CanvasId> = new GenerationalArena<Canvas, CanvasId>();\nconst canvasMap: Record<string, CanvasId> = {};\nconst canvasContextMap: Record<CanvasId, ContextId> = {};\nconst resources: Arena<Resource, ResourceId> = new GenerationalArena<Resource, ResourceId>();\nconst deviceContextMap: Record<ResourceId, ContextId> = {};\n\nfunction getMemory(context: ContextId): WebAssembly.Memory {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return contexts[context].memory!;\n}\n\nfunction getDeviceMemory(resource: ResourceId): WebAssembly.Memory {\n  return getMemory(deviceContextMap[resource]);\n}\n\nfunction deleteResource(id: ResourceId): void {\n  const resource = resources.get(id);\n  if (resource) {\n    resource.destroy();\n    resources.delete(id);\n  }\n}\n\nexport function set_context_memory(context: ContextId, memory: WebAssembly.Memory): void {\n  (contexts[context] = contexts[context] || { memory: null }).memory = memory;\n}\n\nexport function free_context(context: ContextId): void {\n  delete contexts[context];\n}\n\nexport function get_future_status(future: FutureId): FutureStatus {\n  const f = futures.get(future);\n  if (f) {\n    if (f.status !== FutureStatus.Pending) {\n      futures.delete(future);\n    }\n    return f.status;\n  }\n  return FutureStatus.Done;\n}\n\nexport function create_image(context: ContextId, ptr: UInt, len: UInt): ImageSourceId {\n  const img = new Image();\n  img.crossOrigin = 'anonymous';\n  img.src = decodeStr(getMemory(context), ptr, len);\n  return images.add(img);\n}\n\nexport function get_image_by_id(context: ContextId, ptr: UInt, len: UInt): ImageSourceId {\n  const id = decodeStr(getMemory(context), ptr, len);\n  if (imageMap[id]) {\n    return imageMap[id];\n  }\n  const image = document.getElementById(id) as ImageSource;\n  if (!image) {\n    return 0 as ImageSourceId;\n  }\n  return (imageMap[id] = images.add(image));\n}\n\nexport function delete_image(img: ImageSourceId): void {\n  images.delete(img);\n}\n\nexport function get_image_width(img: ImageSourceId): UInt {\n  return images.get(img)?.width || 0;\n}\n\nexport function get_image_height(img: ImageSourceId): UInt {\n  return images.get(img)?.height || 0;\n}\n\nexport function get_canvas_by_id(context: ContextId, ptr: UInt, len: UInt): CanvasId {\n  const id = decodeStr(getMemory(context), ptr, len);\n  if (canvasMap[id]) {\n    return canvasMap[id];\n  }\n  const canvas = document.getElementById(id) as Canvas;\n  if (!canvas) {\n    return 0 as CanvasId;\n  }\n  const canvasId = canvasMap[id] = canvases.add(canvas);\n  canvasContextMap[canvasId] = context;\n  return canvasId;\n}\n\nexport function get_canvas_width(canvas: CanvasId): UInt {\n  return canvases.get(canvas)?.width || 0;\n}\n\nexport function get_canvas_height(canvas: CanvasId): UInt {\n  return canvases.get(canvas)?.height || 0;\n}\n\nexport function webgl_request_device(canvasId: CanvasId, attrs: UInt, features: UInt): ResourceId {\n  const canvas = canvases.get(canvasId);\n  if (canvas) {\n    const device = WebGL.requestWebGL2Device(canvas, toWebGLContextAttributes(attrs), features);\n    if (device) {\n      const deviceId = resources.add(device);\n      deviceContextMap[deviceId] = canvasContextMap[canvasId];\n      return deviceId;\n    }\n  }\n  return 0 as ResourceId;\n}\n\nexport function webgl_generate_mipmap(device: ResourceId, tex: ResourceId, hint: MipmapHint): void {\n  WebGL.generateMipmap(resources.get(device) as Device, resources.get(tex) as Texture, hint);\n}\n\nexport function reset_device(device: ResourceId): void {\n  WebGL.resetDevice(resources.get(device) as Device);\n}\n\nexport function delete_device(device: ResourceId): void {\n  deleteResource(device);\n  delete deviceContextMap[device];\n}\n\nexport function is_device_lost(device: ResourceId): boolean {\n  return WebGL.isDeviceLost(resources.get(device) as Device);\n}\n\nexport function get_device_features(device: ResourceId): UInt {\n  return WebGL.getDeviceFeatures(resources.get(device) as Device);\n}\n\nexport function create_buffer(device: ResourceId, size: UInt, usage: BufferUsage): ResourceId {\n  const ret = WebGL.createBuffer(resources.get(device) as Device, {\n    size: size >>> 0,\n    usage: usage >>> 0,\n  });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_buffer };\n\nexport function create_texture(\n  device: ResourceId,\n  width: UInt, height: UInt, depth: UInt,\n  mipLevelCount: UInt,\n  sampleCount: UInt,\n  dimension: TextureDimension,\n  format: TextureFormat,\n  usage: TextureUsage\n): ResourceId {\n  const ret = WebGL.createTexture(resources.get(device) as Device, {\n    size: [width >>> 0, height >>> 0, depth >>> 0],\n    mipLevelCount: mipLevelCount >>> 0,\n    sampleCount: sampleCount >>> 0,\n    dimension: dimension >>> 0,\n    format: format >>> 0,\n    usage: usage >>> 0,\n  });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_texture };\n\nexport function create_sampler(\n  device: ResourceId,\n  addressModeU: AddressMode, addressModeV: AddressMode, addressModeW: AddressMode,\n  magFilter: FilterMode, minFilter: FilterMode, mipmapFilter: FilterMode,\n  lodMinClamp: Float, lodMaxClamp: Float,\n  compare: CompareFunction,\n  maxAnisotropy: UInt\n): ResourceId {\n  const ret = WebGL.createSampler(resources.get(device) as Device, {\n    addressModeU: addressModeU >>> 0,\n    addressModeV: addressModeV >>> 0,\n    addressModeW: addressModeW >>> 0,\n    magFilter: magFilter >>> 0,\n    minFilter: minFilter >>> 0,\n    mipmapFilter: mipmapFilter >>> 0,\n    lodMinClamp,\n    lodMaxClamp,\n    compare: compare >>> 0,\n    maxAnisotropy: maxAnisotropy >>> 0,\n  });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_sampler };\n\nexport function create_shader(device: ResourceId, codePtr: UInt, codeLen: UInt, usage: ShaderStage): ResourceId {\n  const ret = WebGL.createShader(resources.get(device) as Device, {\n    code: decodeStr(getDeviceMemory(device), codePtr, codeLen),\n    usage: usage >>> 0,\n  });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_shader };\n\nexport function create_bind_group_layout(device: ResourceId, entriesPtr: UInt, entriesLen: UInt): ResourceId {\n  const memory = getDeviceMemory(device);\n  const entries: BindGroupLayoutEntry[] = [];\n  for (let i = 0; i < entriesLen; i++) {\n    const base = entriesPtr + i * 32;\n    const ptr0 = dataView(memory).getUint32(base + 0, true);\n    const len0 = dataView(memory).getUint32(base + 4, true);\n    const type = dataView(memory).getUint8(base + 16);\n    let bufferDynamicOffset = false;\n    let samplerType = SamplerBindingType.Filtering;\n    let textureSampleType = TextureSampleType.Float;\n    let textureDimension = TextureDimension.D2;\n    let textureMultisampled = false;\n\n    switch (type) {\n      case BindingType.Buffer:\n        bufferDynamicOffset = !!dataView(memory).getUint8(base + 20);\n        break;\n      case BindingType.Sampler:\n        samplerType = dataView(memory).getUint32(base + 20, true) >>> 0;\n        break;\n      case BindingType.Texture:\n        textureSampleType = dataView(memory).getUint32(base + 20, true) >>> 0;\n        textureDimension = dataView(memory).getUint32(base + 24, true) >>> 0;\n        textureMultisampled = !!dataView(memory).getUint8(base + 28);\n        break;\n      default:\n        throw new RangeError('invalid variant discriminant for BindingType');\n    }\n    entries.push({\n      label: decodeStr(memory, ptr0, len0),\n      binding: dataView(memory).getUint32(base + 8, true) >>> 0,\n      visibility: dataView(memory).getUint32(base + 12, true) >>> 0,\n      type,\n      bufferDynamicOffset,\n      samplerType,\n      textureSampleType,\n      textureDimension,\n      textureMultisampled,\n    });\n  }\n  const ret = WebGL.createBindGroupLayout(resources.get(device) as Device, { entries });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_bind_group_layout };\n\nexport function create_bind_group(device: ResourceId, layout: ResourceId, entriesPtr: UInt, entriesLen: UInt): ResourceId {\n  const memory = getDeviceMemory(device);\n  const entries = [];\n  for (let i = 0; i < entriesLen; i++) {\n    const base = entriesPtr + i * 24;\n    const type = dataView(memory).getUint8(base + 4);\n    let buffer: Buffer | null = null;\n    let bufferOffset = 0;\n    let bufferSize = 0;\n    let sampler: Sampler | null = null;\n    let texture: Texture | null = null;\n\n    switch (type) {\n      case BindingType.Buffer:\n        buffer = resources.get(dataView(memory).getFloat64(base + 8, true) as ResourceId) as Buffer;\n        bufferOffset = dataView(memory).getUint32(base + 16, true);\n        bufferSize = dataView(memory).getUint32(base + 20, true);\n        break;\n      case BindingType.Sampler:\n        sampler = resources.get(dataView(memory).getFloat64(base + 8, true) as ResourceId) as Sampler;\n        break;\n      case BindingType.Texture:\n        texture = resources.get(dataView(memory).getFloat64(base + 8, true) as ResourceId) as Texture;\n        break;\n      default:\n        throw new RangeError('invalid variant discriminant for BindingResource');\n    }\n    entries.push({\n      binding: dataView(memory).getUint32(base + 0, true),\n      buffer,\n      bufferOffset,\n      bufferSize,\n      sampler,\n      texture\n    });\n  }\n  const ret = WebGL.createBindGroup(resources.get(device) as Device, {\n    layout: resources.get(layout) as BindGroupLayout,\n    entries,\n  });\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_bind_group };\n\nexport function create_render_pipeline(\n  device: ResourceId,\n  vertex: ResourceId, fragment: ResourceId,\n  attributesPtr: UInt, attributesLen: UInt,\n  buffersPtr: UInt, buffersLen: UInt,\n  bindGroupsPtr: UInt, bindGroupsLen: UInt,\n  topology: PrimitiveTopology, indexFormat: IndexFormat, frontFace: FrontFace, cullMode: CullMode,\n  sampleCount: UInt, alphaToCoverage: UInt,\n  hasDepthStencil: UInt, depthStencilFormat: TextureFormat, depthWrite: UInt, depthCompare: CompareFunction,\n  stencilFrontCompare: CompareFunction, stencilFrontFailOp: StencilOperation, stencilFrontDepthFailOp: StencilOperation, stencilFrontPassOp: StencilOperation,\n  stencilBackCompare: CompareFunction, stencilBackFailOp: StencilOperation, stencilBackDepthFailOp: StencilOperation, stencilBackPassOp: StencilOperation,\n  stencilReadMask: UInt, stencilWriteMask: UInt, depthBias: Float, depthBiasSlopeScale: Float, depthBiasClamp: Float,\n  colorsPtr: UInt, colorsLen: UInt,\n  colorWriteMask: UInt, blendColorOperation: UInt, blendColorSrcFactor: UInt, blendColorDstFactor: UInt, blendAlphaOperation: UInt, blendAlphaSrcFactor: UInt, blendAlphaDstFactor: UInt\n): ResourceId {\n  const memory = getDeviceMemory(device);\n  const attributes: VertexAttribute[] = [];\n  for (let i = 0; i < attributesLen; i++) {\n    const base = attributesPtr + i * 12;\n    attributes.push({\n      format: dataView(memory).getUint32(base + 0, true),\n      offset: dataView(memory).getUint32(base + 4, true),\n      shaderLocation: dataView(memory).getUint32(base + 8, true),\n    });\n  }\n\n  const buffers: VertexBufferLayout[] = [];\n  for (let i = 0; i < buffersLen; i++) {\n    const base = buffersPtr + i * 16;\n    const start = dataView(memory).getUint32(base + 0, true);\n    const len = dataView(memory).getUint32(base + 4, true);\n    buffers.push({\n      attributes: attributes.slice(start, start + len),\n      stride: dataView(memory).getUint32(base + 8, true),\n      stepMode: dataView(memory).getUint32(base + 12, true),\n    });\n  }\n\n  const bindGroups: BindGroupLayout[] = [];\n  for (let i = 0; i < bindGroupsLen; i++) {\n    const base = bindGroupsPtr + i * 8;\n    bindGroups.push(resources.get(dataView(memory).getFloat64(base + 0, true) as ResourceId) as BindGroupLayout);\n  }\n\n  const targets: ColorTargetState[] = [];\n  for (let i = 0; i < colorsLen; i++) {\n    const base = colorsPtr + i * 32;\n    targets.push({\n      format: dataView(memory).getUint32(base + 0, true) >>> 0,\n      writeMask: dataView(memory).getUint32(base + 4, true) >>> 0,\n      blendColor: {\n        operation: dataView(memory).getUint32(base + 8, true) >>> 0,\n        srcFactor: dataView(memory).getUint32(base + 12, true) >>> 0,\n        dstFactor: dataView(memory).getUint32(base + 16, true) >>> 0,\n      },\n      blendAlpha: {\n        operation: dataView(memory).getUint32(base + 20, true) >>> 0,\n        srcFactor: dataView(memory).getUint32(base + 24, true) >>> 0,\n        dstFactor: dataView(memory).getUint32(base + 28, true) >>> 0,\n      }\n\n    });\n  }\n\n  const ret = WebGL.createRenderPipeline(resources.get(device) as Device, {\n    vertex: resources.get(vertex) as Shader,\n    fragment: resources.get(fragment) as Shader,\n    buffers,\n    bindGroups,\n    primitive: {\n      topology: topology >>> 0,\n      indexFormat: indexFormat >>> 0,\n      frontFace: frontFace >>> 0,\n      cullMode: cullMode >>> 0,\n    },\n    multisample: {\n      sampleCount: sampleCount >>> 0,\n      alphaToCoverage: !!alphaToCoverage,\n    },\n    depthStencil: hasDepthStencil ? {\n      format: depthStencilFormat >>> 0,\n      depthWrite: !!depthWrite,\n      depthCompare: depthCompare >>> 0,\n      stencilFront: {\n        compare: stencilFrontCompare >>> 0,\n        failOp: stencilFrontFailOp >>> 0,\n        depthFailOp: stencilFrontDepthFailOp >>> 0,\n        passOp: stencilFrontPassOp >>> 0,\n      },\n      stencilBack: {\n        compare: stencilBackCompare >>> 0,\n        failOp: stencilBackFailOp >>> 0,\n        depthFailOp: stencilBackDepthFailOp >>> 0,\n        passOp: stencilBackPassOp >>> 0,\n      },\n      stencilReadMask: stencilReadMask >>> 0,\n      stencilWriteMask: stencilWriteMask >>> 0,\n      depthBias,\n      depthBiasSlopeScale,\n      depthBiasClamp,\n    } : null,\n    targets: {\n      writeMask: colorWriteMask >>> 0,\n      blendColor: {\n        operation: blendColorOperation >>> 0,\n        srcFactor: blendColorSrcFactor >>> 0,\n        dstFactor: blendColorDstFactor >>> 0,\n      },\n      blendAlpha: {\n        operation: blendAlphaOperation >>> 0,\n        srcFactor: blendAlphaSrcFactor >>> 0,\n        dstFactor: blendAlphaDstFactor >>> 0,\n      },\n      targets,\n    }\n\n  });\n\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_render_pipeline };\n\nexport function create_render_pass(\n  device: ResourceId,\n  clearDepth: Float, clearStencil: Float,\n  clearColorRed: Float, clearColorGreen: Float, clearColorBlue: Float, clearColorAlpha: Float,\n  isOffscreen: UInt,\n  depthStencilTexture: ResourceId, depthStecilMipLevel: UInt, depthStecilSlice: UInt,\n  colorsPtr: UInt, colorsLen: UInt\n): ResourceId {\n  const memory = getDeviceMemory(device);\n  let desc: RenderPassDescriptor;\n  switch (isOffscreen) {\n    case 0:  // Default pass\n      desc = {\n        clearDepth,\n        clearStencil,\n        clearColor: isNaN(clearColorRed) ? null : [clearColorRed, clearColorGreen, clearColorBlue, clearColorAlpha],\n      };\n      break;\n    case 1: { // Offscreen pass\n      const colors: ColorAttachment[] = [];\n      for (let i = 0; i < colorsLen; i++) {\n        const base = colorsPtr + i * 32;\n        const clear: Color = [\n          dataView(memory).getFloat32(base + 16, true),\n          dataView(memory).getFloat32(base + 20, true),\n          dataView(memory).getFloat32(base + 24, true),\n          dataView(memory).getFloat32(base + 28, true)\n        ];\n        colors.push({\n          view: {\n            texture: resources.get(dataView(memory).getFloat64(base + 0, true) as ResourceId) as Texture,\n            mipLevel: dataView(memory).getUint32(base + 8, true),\n            slice: dataView(memory).getUint32(base + 12, true),\n          },\n          clear: isNaN(clear[0]) ? null : clear,\n        });\n      }\n      desc = {\n        clearDepth,\n        clearStencil,\n        colors,\n        depthStencil: {\n          texture: resources.get(depthStencilTexture) as Texture,\n          mipLevel: depthStecilMipLevel >>> 0,\n          slice: depthStecilSlice >>> 0,\n        }\n\n      };\n      break;\n    }\n    default:\n      throw new RangeError('invalid variant discriminant for RenderPassDescriptor');\n  }\n  const ret = WebGL.createRenderPass(resources.get(device) as Device, desc);\n  return resources.add(ret);\n}\n\nexport { deleteResource as delete_render_pass };\n\nexport function read_buffer(device: ResourceId, buffer: ResourceId, offset: UInt, outPtr: UInt, size: UInt): FutureId {\n  const ret = WebGL.readBuffer(\n    resources.get(device) as Device,\n    resources.get(buffer) as Buffer,\n    new Uint8Array(getDeviceMemory(device).buffer.slice(outPtr, outPtr + size * 1),\n      offset >>> 0)\n  );\n  return futures.add(ret);\n}\n\nexport function write_buffer(device: ResourceId, buffer: ResourceId, dataPtr: UInt, size: UInt, offset: UInt): void {\n  WebGL.writeBuffer(resources.get(device) as Device, resources.get(buffer) as Buffer, new Uint8Array(getDeviceMemory(device).buffer.slice(dataPtr, dataPtr + size * 1)), offset >>> 0);\n}\n\nexport function copy_buffer(device: ResourceId, src: ResourceId, dst: ResourceId, size: UInt, srcOffset: UInt, dstOffset: UInt): void {\n  WebGL.copyBuffer(resources.get(device) as Device, resources.get(src) as Buffer, resources.get(dst) as Buffer, size >>> 0, srcOffset >>> 0, dstOffset >>> 0);\n}\n\nexport function write_texture(\n  device: ResourceId,\n  texture: ResourceId, mipLevel: UInt, x: UInt, y: UInt, z: UInt,\n  dataPtr: UInt, dataLen: UInt,\n  offset: UInt, bytesPerRow: UInt, rowsPerImage: UInt,\n  width: UInt, height: UInt, depth: UInt\n) {\n  WebGL.writeTexture(resources.get(device) as Device, {\n    texture: resources.get(texture) as Texture,\n    mipLevel: mipLevel >>> 0,\n    origin: [x >>> 0, y >>> 0, z >>> 0],\n  },\n    new Uint8Array(getDeviceMemory(device).buffer.slice(dataPtr, dataPtr + dataLen * 1)), {\n    offset: offset >>> 0,\n    bytesPerRow: bytesPerRow >>> 0,\n    rowsPerImage: rowsPerImage >>> 0,\n  },\n    [width >>> 0, height >>> 0, depth >>> 0]);\n}\n\nexport function copy_external_image_to_texture(\n  device: ResourceId,\n  src: ImageSourceId, srcX: UInt, srcY: UInt,\n  dst: ResourceId, mipLevel: UInt, dstX: UInt, dstY: UInt, dstZ: UInt,\n  width: UInt, height: UInt\n): void {\n  WebGL.copyExternalImageToTexture(resources.get(device) as Device,\n    {\n      src: images.get(src) as TexImageSource,\n      origin: [srcX >>> 0, srcY >>> 0],\n    },\n    {\n      texture: resources.get(dst) as Texture,\n      mipLevel: mipLevel >>> 0,\n      origin: [dstX >>> 0, dstY >>> 0, dstZ >>> 0],\n    },\n    [width >>> 0, height >>> 0]);\n}\n\nexport function copy_texture(\n  device: ResourceId,\n  src: ResourceId, srcMipLevel: UInt, srcX: UInt, srcY: UInt, srcZ: UInt,\n  dst: ResourceId, dstMipLevel: UInt, dstX: UInt, dstY: UInt, dstZ: UInt,\n  width: UInt, height: UInt, depth: UInt\n) {\n  WebGL.copyTexture(resources.get(device) as Device,\n    {\n      texture: resources.get(src) as Texture,\n      mipLevel: srcMipLevel >>> 0,\n      origin: [srcX >>> 0, srcY >>> 0, srcZ >>> 0],\n    },\n    {\n      texture: resources.get(dst) as Texture,\n      mipLevel: dstMipLevel >>> 0,\n      origin: [dstX >>> 0, dstY >>> 0, dstZ >>> 0],\n    },\n    [width >>> 0, height >>> 0, depth >>> 0]);\n}\n\nexport function copy_texture_to_buffer(\n  device: ResourceId,\n  src: ResourceId, srcMipLevel: UInt, srcX: UInt, srcY: UInt, srcZ: UInt,\n  dst: ResourceId,\n  offset: UInt, bytesPerRow: UInt, rowsPerImage: UInt,\n  width: UInt, height: UInt, depth: UInt\n): void {\n  WebGL.copyTextureToBuffer(resources.get(device) as Device,\n    {\n      texture: resources.get(src) as Texture,\n      mipLevel: srcMipLevel >>> 0,\n      origin: [srcX >>> 0, srcY >>> 0, srcZ >>> 0],\n    },\n    resources.get(dst) as Buffer,\n    {\n      offset: offset >>> 0,\n      bytesPerRow: bytesPerRow >>> 0,\n      rowsPerImage: rowsPerImage >>> 0,\n    },\n    [width >>> 0, height >>> 0, depth >>> 0]);\n}\n\n\nexport function begin_render_pass(device: ResourceId, pass: ResourceId): void {\n  WebGL.beginRenderPass(resources.get(device) as Device, resources.get(pass) as RenderPass);\n}\n\nexport function begin_default_pass(\n  device: ResourceId,\n  clearDepth: Float, clearStencil: Float,\n  clearColorRed: Float, clearColorGreen: Float, clearColorBlue: Float, clearColorAlpha: Float,\n): void {\n  WebGL.beginDefaultPass(resources.get(device) as Device, {\n    clearColor: isNaN(clearColorRed) ? null : [clearColorRed, clearColorGreen, clearColorBlue, clearColorAlpha],\n    clearDepth,\n    clearStencil,\n  });\n}\n\nexport function submit_render_pass(device: ResourceId): void {\n  WebGL.submitRenderPass(resources.get(device) as Device);\n}\n\nexport function set_render_pipeline(device: ResourceId, pipeline: ResourceId): void {\n  WebGL.setRenderPipeline(resources.get(device) as Device, resources.get(pipeline) as RenderPipeline);\n}\n\nexport function set_index(device: ResourceId, index: ResourceId): void {\n  WebGL.setIndex(resources.get(device) as Device, resources.get(index) as Buffer);\n}\n\nexport function set_vertex(device: ResourceId, slot: UInt, vertex: ResourceId, offset: UInt): void {\n  WebGL.setVertex(resources.get(device) as Device, slot >>> 0, resources.get(vertex) as Buffer, offset >>> 0);\n}\n\nexport function set_bind_group(device: ResourceId, slot: UInt, bindGroup: ResourceId, offsetsPtr: UInt, offsetsLen: UInt): void {\n  WebGL.setBindGroup(\n    resources.get(device) as Device, slot >>> 0,\n    resources.get(bindGroup) as BindGroup,\n    new Uint32Array(getDeviceMemory(device).buffer.slice(offsetsPtr, offsetsPtr + offsetsLen * 4)) as unknown as UInt[]\n  );\n}\n\nexport function draw(device: ResourceId, vertexCount: UInt, instanceCount: UInt, firstVertex: UInt, firstInstance: UInt): void {\n  WebGL.draw(resources.get(device) as Device, vertexCount >>> 0, instanceCount >>> 0, firstVertex >>> 0, firstInstance >>> 0);\n}\n\nexport function draw_indexed(device: ResourceId, indexCount: UInt, instanceCount: UInt, firstIndex: UInt, firstInstance: UInt): void {\n  WebGL.drawIndexed(resources.get(device) as Device, indexCount >>> 0, instanceCount >>> 0, firstIndex >>> 0, firstInstance >>> 0);\n}\n\nexport function set_viewport(device: ResourceId, x: UInt, y: UInt, width: UInt, height: UInt, minDepth: UInt, maxDepth: UInt): void {\n  WebGL.setViewport(resources.get(device) as Device, x >>> 0, y >>> 0, width >>> 0, height >>> 0, minDepth >>> 0, maxDepth >>> 0);\n}\n\nexport function set_scissor_rect(device: ResourceId, x: UInt, y: UInt, width: UInt, height: UInt): void {\n  WebGL.setScissorRect(resources.get(device) as Device, x >>> 0, y >>> 0, width >>> 0, height >>> 0);\n}\n\nexport function set_blend_const(device: ResourceId, red: Float, green: Float, blue: Float, alpha: Float): void {\n  WebGL.setBlendConst(resources.get(device) as Device, [red, green, blue, alpha]);\n}\n\nexport function set_stencil_ref(device: ResourceId, ref: UInt): void {\n  WebGL.setStencilRef(resources.get(device) as Device, ref >>> 0);\n}\n"],"mappings":"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"}