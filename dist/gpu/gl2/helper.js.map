{"version":3,"file":"helper.js","names":["MUGL_DEBUG","GLenum","is3DTexture","ColorWrite","STENCIL_MASK","isDeviceLost","device","gl","isContextLost","initWebGL2State","state","createPipelineState","blendColor","applyPipelineState","maxAttribs","getParameter","MAX_VERTEX_ATTRIBS","i","disableVertexAttribArray","pixelStorei","PACK_ALIGNMENT","UNPACK_ALIGNMENT","copyFrameBuffer","createFramebuffer","buffers","pipeline","index","stencilRef","scissor","desc","primitive","depthStencil","stencilFront","stencilBack","sampleCount","alphaToCoverage","multisample","targets","drawBuffers","map","target","createPipelineBlendState","blendAlpha","writeMask","topology","TRIANGLES","indexFormat","UNSIGNED_SHORT","frontFace","CCW","cullMode","NONE","depth","depthWrite","depthFormat","format","DEPTH_COMPONENT16","depthCompare","ALWAYS","depthBias","depthBiasSlopeScale","stencil","stencilFrontCompare","compare","stencilFrontFailOp","failOp","KEEP","stencilFrontDepthFailOp","depthFailOp","stencilFrontPassOp","passOp","stencilBackCompare","stencilBackFailOp","stencilBackDepthFailOp","stencilBackPassOp","stencilReadMask","stencilWriteMask","blend","blendWriteMask","All","blendColorOp","operation","FUNC_ADD","blendColorSrcFactor","srcFactor","ONE","blendColorDstFactor","dstFactor","ZERO","blendAlphaOp","blendAlphaSrcFactor","blendAlphaDstFactor","extDrawBuffersi","prevState","force","b","n","n2","n3","n4","cullFace","glToggle","CULL_FACE","SAMPLE_ALPHA_TO_COVERAGE","DEPTH_TEST","applyDepthMask","depthFunc","POLYGON_OFFSET_FILL","polygonOffset","STENCIL_TEST","stencilFuncSeparate","FRONT","BACK","stencilOpSeparate","applyStencilMask","BLEND","blendFuncSeparate","blendEquationSeparate","applyColorMask","length","applyBlendStatei","ext","blendFuncSeparateiOES","blendEquationSeparateiOES","applyColorMaski","prevMask","mask","colorMaskiOES","Red","Green","Blue","Alpha","colorMask","depthMask","stencilMask","flag","enable","disable","compileShaderProgram","vertex","fragment","glp","createProgram","attachShader","linkProgram","console","assert","getProgramParameter","LINK_STATUS","getProgramInfoLog","framebufferTexture","attachment","texture","slice","mipLevel","type","framebufferTextureLayer","FRAMEBUFFER","glt","texTarget","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","framebufferTexture2D","createResolveFrameBuffer","view","fb","bindFramebuffer","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","blitFramebuffer","from","to","tex","COLOR_ATTACHMENT0","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","readBuffer","width","height","NEAREST","clientWaitAsync","sync","flags","interval","Promise","resolve","reject","test","res","clientWaitSync","WAIT_FAILED","TIMEOUT_EXPIRED","setTimeout","getBufferSubData","buffer","srcOffset","fenceSync","SYNC_GPU_COMMANDS_COMPLETE","flush","finally","deleteSync","then","data","Uint8Array","bindBuffer","vertexAttribs","offset","ARRAY_BUFFER","glb","attributes","ptr","step","params","vertexAttribPointer","vertexAttribDivisor"],"sources":["../../../js/gpu/gl2/helper.ts"],"sourcesContent":["import { MUGL_DEBUG } from '../../config';\nimport { BlendComponent, RenderPipelineState, TextureView } from '../descriptor';\nimport * as GLenum from '../gl-const';\nimport { is3DTexture } from '../gl-util';\nimport { UInt } from '../primitive';\nimport { Device } from '../resource';\nimport { ColorWrite } from '../type';\nimport { WebGL2BufferAttributes, WebGL2Device, WebGL2PipelineBlendState, WebGL2PipelineState, WebGL2State, WebGL2Texture } from './model';\n\nconst STENCIL_MASK = 0xFFFFFFFF;\n\n/**\n * Returns if device context is lost.\n * @param device the GPU device\n * @returns true if device context is lost\n */\nexport function isDeviceLost(device: Device): boolean {\n  return (device as WebGL2Device).gl.isContextLost();\n}\n\n//#region State functions\n\nexport function initWebGL2State(gl: WebGL2RenderingContext): WebGL2State {\n  const state = createPipelineState();\n\n  // Apply the default states\n\n  gl.blendColor(1, 1, 1, 1);\n  applyPipelineState(gl, null, state, state, 0, true);\n\n  const maxAttribs = gl.getParameter(GLenum.MAX_VERTEX_ATTRIBS);\n  for (let i = 0; i < maxAttribs; ++i) {\n    gl.disableVertexAttribArray(i);\n  }\n\n  // Default alignment is 4. Use 1 to make byte data texture work.\n  gl.pixelStorei(GLenum.PACK_ALIGNMENT, 1);\n  gl.pixelStorei(GLenum.UNPACK_ALIGNMENT, 1);\n\n  return {\n    copyFrameBuffer: gl.createFramebuffer(),\n    buffers: [],\n    state,\n    pipeline: null,\n    index: null,\n    stencilRef: 0,\n    scissor: false\n  };\n}\n\nexport function createPipelineState(desc: RenderPipelineState = {}): WebGL2PipelineState {\n  const primitive = desc.primitive || {};\n  const depthStencil = desc.depthStencil || {};\n  const { stencilFront = {}, stencilBack = {} } = depthStencil;\n  const { sampleCount = 1, alphaToCoverage = false } = desc.multisample || {};\n  const targets = desc.targets || {};\n  const drawBuffers = (targets.targets && targets.targets.map((target) =>\n    createPipelineBlendState(target.blendColor, target.blendAlpha, target.writeMask)\n  )) || [];\n\n  return {\n    sampleCount,\n    alphaToCoverage,\n\n    topology: primitive.topology || GLenum.TRIANGLES,\n    indexFormat: primitive.indexFormat || GLenum.UNSIGNED_SHORT,\n    frontFace: primitive.frontFace || GLenum.CCW,\n    cullMode: primitive.cullMode || GLenum.NONE,\n\n    depth: !!desc.depthStencil,\n    depthWrite: depthStencil.depthWrite || false,\n    depthFormat: depthStencil.format || GLenum.DEPTH_COMPONENT16,\n    depthCompare: depthStencil.depthCompare || GLenum.ALWAYS,\n    depthBias: depthStencil.depthBias || 0,\n    depthBiasSlopeScale: depthStencil.depthBiasSlopeScale || 0,\n\n    stencil: !!(depthStencil.stencilFront || depthStencil.stencilBack),\n    stencilFrontCompare: stencilFront.compare || GLenum.ALWAYS,\n    stencilFrontFailOp: stencilFront.failOp || GLenum.KEEP,\n    stencilFrontDepthFailOp: stencilFront.depthFailOp || GLenum.KEEP,\n    stencilFrontPassOp: stencilFront.passOp || GLenum.KEEP,\n    stencilBackCompare: stencilBack.compare || GLenum.ALWAYS,\n    stencilBackFailOp: stencilBack.failOp || GLenum.KEEP,\n    stencilBackDepthFailOp: stencilBack.depthFailOp || GLenum.KEEP,\n    stencilBackPassOp: stencilBack.passOp || GLenum.KEEP,\n    stencilReadMask: depthStencil.stencilReadMask || STENCIL_MASK,\n    stencilWriteMask: depthStencil.stencilWriteMask || STENCIL_MASK,\n\n    blend: !!desc.targets,\n    drawBuffers,\n    ...createPipelineBlendState(targets.blendColor, targets.blendAlpha, targets.writeMask)\n  };\n}\n\nfunction createPipelineBlendState(\n  blendColor: BlendComponent = {}, blendAlpha: BlendComponent = {}, blendWriteMask: ColorWrite = ColorWrite.All\n): WebGL2PipelineBlendState {\n  return {\n    blendWriteMask,\n    blendColorOp: blendColor.operation || GLenum.FUNC_ADD,\n    blendColorSrcFactor: blendColor.srcFactor !== void 0 ? blendColor.srcFactor : GLenum.ONE,\n    blendColorDstFactor: blendColor.dstFactor || GLenum.ZERO,\n    blendAlphaOp: blendAlpha.operation || GLenum.FUNC_ADD,\n    blendAlphaSrcFactor: blendAlpha.srcFactor !== void 0 ? blendAlpha.srcFactor : GLenum.ONE,\n    blendAlphaDstFactor: blendAlpha.dstFactor || GLenum.ZERO,\n  };\n}\n\nexport function applyPipelineState(\n  gl: WebGL2RenderingContext, extDrawBuffersi: OES_draw_buffers_indexed | null,\n  prevState: WebGL2PipelineState, state: WebGL2PipelineState, stencilRef = 0,\n  force = false\n): void {\n  // Temporary variables to reuse for performance\n  let b = false, n = 0, n2 = 0, n3 = 0, n4 = 0;\n\n  // 1. Apply primitive state\n  n = state.frontFace;\n  if (force || (prevState.frontFace !== n)) {\n    gl.frontFace(n);\n  }\n  n = state.cullMode;\n  if (force || (prevState.cullMode !== n)) {\n    if ((b = (n !== GLenum.NONE))) {\n      gl.cullFace(n);\n    }\n    glToggle(gl, GLenum.CULL_FACE, b);\n  }\n\n  // 2. Apply multisample state\n  b = state.alphaToCoverage;\n  if (force || (prevState.alphaToCoverage !== b)) {\n    glToggle(gl, GLenum.SAMPLE_ALPHA_TO_COVERAGE, b);\n  }\n\n  // 3. Apply depth state changes\n  b = !!state.depth;\n  if (force || (prevState.depth !== b)) {\n    glToggle(gl, GLenum.DEPTH_TEST, b);\n  }\n\n  if (force || b) {\n    applyDepthMask(gl, prevState.depthWrite, state.depthWrite, force);\n\n    n = state.depthCompare;\n    if (force || (prevState.depthCompare !== n)) {\n      gl.depthFunc(n);\n    }\n  }\n\n  n = state.depthBiasSlopeScale;\n  n2 = state.depthBias;\n  if (force || (prevState.depthBiasSlopeScale !== n) || (prevState.depthBias !== n2)) {\n    glToggle(gl, GLenum.POLYGON_OFFSET_FILL, !(!n && !n2)); // Enable if any of the 2 values is non-zero\n    gl.polygonOffset(n, n2);\n  }\n\n  // 4. Apply stencil state changes\n  b = !!state.stencil;\n  if (force || (prevState.stencil !== b)) {\n    glToggle(gl, GLenum.STENCIL_TEST, b);\n  }\n\n  if (force || b) {\n    n = state.stencilReadMask;\n    b = force || (prevState.stencilReadMask !== n);\n\n    n2 = state.stencilFrontCompare;\n    if (b || (prevState.stencilFrontCompare !== n2)) {\n      gl.stencilFuncSeparate(GLenum.FRONT, n2, stencilRef, n);\n    }\n    n2 = state.stencilBackCompare;\n    if (b || (prevState.stencilBackCompare !== n2)) {\n      gl.stencilFuncSeparate(GLenum.BACK, n2, stencilRef, n);\n    }\n\n    n = state.stencilFrontFailOp;\n    n2 = state.stencilFrontDepthFailOp;\n    n3 = state.stencilFrontPassOp;\n    if (force ||\n      (prevState.stencilFrontFailOp !== n) ||\n      (prevState.stencilFrontDepthFailOp !== n2) ||\n      (prevState.stencilFrontPassOp !== n3)\n    ) {\n      gl.stencilOpSeparate(GLenum.FRONT, n, n2, n3);\n    }\n    n = state.stencilBackFailOp;\n    n2 = state.stencilBackDepthFailOp;\n    n3 = state.stencilBackPassOp;\n    if (force ||\n      (prevState.stencilBackFailOp !== n) ||\n      (prevState.stencilBackDepthFailOp !== n2) ||\n      (prevState.stencilBackPassOp !== n3)\n    ) {\n      gl.stencilOpSeparate(GLenum.BACK, n, n2, n3);\n    }\n\n    applyStencilMask(gl, prevState.stencilWriteMask, state.stencilWriteMask, force);\n  }\n\n  // 5. Apply blend state changes\n  b = state.blend;\n  if (force || (prevState.blend !== b)) {\n    glToggle(gl, GLenum.BLEND, b);\n  }\n\n  if (force || b) {\n    n = state.blendColorSrcFactor;\n    n2 = state.blendColorDstFactor;\n    n3 = state.blendAlphaSrcFactor;\n    n4 = state.blendAlphaDstFactor;\n    if (force ||\n      (prevState.blendColorSrcFactor !== n) ||\n      (prevState.blendColorDstFactor !== n2) ||\n      (prevState.blendAlphaSrcFactor !== n3) ||\n      (prevState.blendAlphaDstFactor !== n4)\n    ) {\n      gl.blendFuncSeparate(n, n2, n3, n4);\n    }\n\n    n = state.blendColorOp;\n    n2 = state.blendAlphaOp;\n    if (force || (prevState.blendColorOp !== n) || (prevState.blendAlphaOp !== n2)) {\n      gl.blendEquationSeparate(n, n2);\n    }\n\n    applyColorMask(gl, prevState.blendWriteMask, state.blendWriteMask, force);\n\n    // 5.1. Apply individual draw buffer blend states on top of existing blend state \n    if (extDrawBuffersi) {\n      for (let i = 0; i < state.drawBuffers.length; ++i) {\n        applyBlendStatei(extDrawBuffersi, i, state, state.drawBuffers[i]);\n      }\n    }\n  }\n}\n\nfunction applyBlendStatei(\n  ext: OES_draw_buffers_indexed, index: number,\n  prevState: WebGL2PipelineBlendState, state: WebGL2PipelineBlendState, force = false\n): void {\n  // Temporary variables to reuse\n  let n = 0, n2 = 0, n3 = 0, n4 = 0;\n\n  n = state.blendColorSrcFactor;\n  n2 = state.blendColorDstFactor;\n  n3 = state.blendAlphaSrcFactor;\n  n4 = state.blendAlphaDstFactor;\n  if (force ||\n    (prevState.blendColorSrcFactor !== n) ||\n    (prevState.blendColorDstFactor !== n2) ||\n    (prevState.blendAlphaSrcFactor !== n3) ||\n    (prevState.blendAlphaDstFactor !== n4)\n  ) {\n    ext.blendFuncSeparateiOES(index, n, n2, n3, n4);\n  }\n\n  n = state.blendColorOp;\n  n2 = state.blendAlphaOp;\n  if (force || (prevState.blendColorOp !== n) || (prevState.blendAlphaOp !== n2)) {\n    ext.blendEquationSeparateiOES(index, n, n2);\n  }\n\n  applyColorMaski(ext, index, prevState.blendWriteMask, state.blendWriteMask, force);\n}\n\nfunction applyColorMaski(\n  ext: OES_draw_buffers_indexed, index: number, prevMask: ColorWrite, mask: ColorWrite, force = false\n): void {\n  if (force || prevMask !== mask) {\n    ext.colorMaskiOES(\n      index,\n      !!(mask & ColorWrite.Red),\n      !!(mask & ColorWrite.Green),\n      !!(mask & ColorWrite.Blue),\n      !!(mask & ColorWrite.Alpha)\n    );\n  }\n}\n\nexport function applyColorMask(gl: WebGL2RenderingContext, prevMask: ColorWrite, mask: ColorWrite, force = false): void {\n  if (force || prevMask !== mask) {\n    gl.colorMask(\n      !!(mask & ColorWrite.Red),\n      !!(mask & ColorWrite.Green),\n      !!(mask & ColorWrite.Blue),\n      !!(mask & ColorWrite.Alpha)\n    );\n  }\n}\n\nexport function applyDepthMask(gl: WebGL2RenderingContext, prevMask: boolean, mask: boolean, force = false): void {\n  if (force || prevMask !== mask) {\n    gl.depthMask(mask);\n  }\n}\n\nexport function applyStencilMask(gl: WebGL2RenderingContext, prevMask: UInt, mask: UInt, force = false): void {\n  if (force || prevMask !== mask) {\n    gl.stencilMask(mask);\n  }\n}\n\nexport function glToggle(gl: WebGL2RenderingContext, flag: GLenum, enable: boolean): void {\n  enable ? gl.enable(flag) : gl.disable(flag);\n}\n\n//#endregion State functions\n\n//#region Utils\n\nexport function compileShaderProgram(device: Device, vertex: WebGLShader, fragment: WebGLShader): WebGLProgram {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const glp = (device as WebGL2Device).gl.createProgram()!;\n  (device as WebGL2Device).gl.attachShader(glp, vertex);\n  (device as WebGL2Device).gl.attachShader(glp, fragment);\n  (device as WebGL2Device).gl.linkProgram(glp);\n\n  if (MUGL_DEBUG) {\n    console.assert(\n      (device as WebGL2Device).gl.getProgramParameter(glp, GLenum.LINK_STATUS) || isDeviceLost(device),\n      `Failed to link program: ${(device as WebGL2Device).gl.getProgramInfoLog(glp)}`\n    );\n  }\n\n  return glp;\n}\n\nexport function framebufferTexture(\n  gl: WebGL2RenderingContext, attachment: GLenum, { texture, slice = 0, mipLevel = 0 }: TextureView\n): void {\n  if (is3DTexture((texture as WebGL2Texture).type)) {\n    gl.framebufferTextureLayer(GLenum.FRAMEBUFFER, attachment, (texture as WebGL2Texture).glt, mipLevel, slice);\n  } else {\n    const texTarget = ((texture as WebGL2Texture).type === GLenum.TEXTURE_CUBE_MAP) ?\n      GLenum.TEXTURE_CUBE_MAP_POSITIVE_X + slice : (texture as WebGL2Texture).type;\n    gl.framebufferTexture2D(GLenum.FRAMEBUFFER, attachment, texTarget, (texture as WebGL2Texture).glt, mipLevel);\n  }\n}\n\nexport function createResolveFrameBuffer(\n  gl: WebGL2RenderingContext, attachment: GLenum, view: TextureView\n): WebGLFramebuffer | null {\n  const fb = gl.createFramebuffer();\n  gl.bindFramebuffer(GLenum.FRAMEBUFFER, fb);\n  framebufferTexture(gl, attachment, view);\n  if (MUGL_DEBUG) {\n    console.assert(\n      gl.checkFramebufferStatus(GLenum.FRAMEBUFFER) === GLenum.FRAMEBUFFER_COMPLETE || gl.isContextLost(),\n      'Framebuffer completeness check failed for MSAA resolve buffer'\n    );\n  }\n  return fb;\n}\n\nexport function blitFramebuffer(\n  gl: WebGL2RenderingContext, from: WebGLFramebuffer | null, to: WebGLFramebuffer | null,\n  tex: WebGL2Texture, mask: number, attachment: UInt = GLenum.COLOR_ATTACHMENT0\n): void {\n  gl.bindFramebuffer(GLenum.READ_FRAMEBUFFER, from);\n  gl.bindFramebuffer(GLenum.DRAW_FRAMEBUFFER, to);\n  gl.readBuffer(attachment);\n  gl.blitFramebuffer(\n    0, 0, tex.width, tex.height,\n    0, 0, tex.width, tex.height,\n    mask, GLenum.NEAREST\n  );\n}\n\nexport function clientWaitAsync(gl: WebGL2RenderingContext, sync: WebGLSync, flags: UInt, interval: UInt): Promise<void> {\n  return new Promise((resolve, reject) => {\n    function test() {\n      const res = gl.clientWaitSync(sync, flags, 0);\n      if (res == GLenum.WAIT_FAILED) {\n        reject();\n      } else if (res == GLenum.TIMEOUT_EXPIRED) {\n        setTimeout(test, interval);\n      } else {\n        resolve();\n      }\n    }\n    test();\n  });\n}\n\nexport function getBufferSubData(gl: WebGL2RenderingContext, target: UInt, buffer: WebGLBuffer, srcOffset: UInt, length: UInt): Promise<Uint8Array> {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const sync = gl.fenceSync(gl.SYNC_GPU_COMMANDS_COMPLETE, 0)!;\n  gl.flush();\n\n  return clientWaitAsync(gl, sync, 0, 10)\n    .finally(() => gl.deleteSync(sync))\n    .then(() => {\n      const data = new Uint8Array(length);\n      gl.bindBuffer(target, buffer);\n      gl.getBufferSubData(target, srcOffset, data, 0, length);\n      return data;\n    });\n}\n\nexport function vertexAttribs(gl: WebGL2RenderingContext, buffer: WebGL2BufferAttributes, offset: UInt): void {\n  gl.bindBuffer(GLenum.ARRAY_BUFFER, buffer.glb);\n  for (let i = 0; i < buffer.attributes.length; ++i) {\n    const { ptr, step } = buffer.attributes[i];\n    const params: [number, number, number, boolean, number, number] = [...ptr];\n    params[5] += offset;\n    gl.vertexAttribPointer(...params);\n    gl.vertexAttribDivisor(ptr[0], step);\n  }\n}\n\n//#endregion Utils\n"],"mappings":"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"}