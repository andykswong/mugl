{"version":3,"sources":["../../../../src/js/gltf/shaders/primitive.vert.ts"],"names":["animationGlsl"],"mappings":"MAAOA,CAAAA,a,kCAEP,cAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAEA,aAAc;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAtHA","sourcesContent":["import animationGlsl from './chunks/animation.glsl';\r\n\r\nexport default `\r\nprecision highp float;\r\n\r\nuniform mat4 model;\r\nuniform mat4 viewProj;\r\nuniform mat3 normalMatrix;\r\n\r\n#ifdef USE_COLOR_0\r\n#if defined(COLOR_0_VEC3)\r\nattribute vec3 COLOR_0;\r\n#else\r\nattribute vec4 COLOR_0;\r\n#endif\r\nvarying vec4 vColor0;\r\n#endif\r\n\r\n#ifdef USE_TEXCOORD_0\r\nattribute vec2 TEXCOORD_0;\r\n#endif\r\n#ifdef USE_TEXCOORD_1\r\nattribute vec2 TEXCOORD_1;\r\n#endif\r\n\r\nvarying vec2 vTexCoord0;\r\nvarying vec2 vTexCoord1;\r\n\r\n${animationGlsl}\r\n\r\nattribute vec3 POSITION;\r\nvarying vec3 vPosition;\r\n\r\nvec4 getPosition() {\r\n  vec4 pos = vec4(POSITION, 1.0);\r\n\r\n#ifdef USE_MORPH\r\n  pos += getTargetPosition();\r\n#endif\r\n#ifdef USE_SKIN\r\n  pos = getSkinMatrix() * pos;\r\n#endif\r\n\r\n  return pos;\r\n}\r\n\r\n#ifdef USE_NORMAL\r\nattribute vec3 NORMAL;\r\n\r\n#ifdef USE_TANGENT\r\nattribute vec4 TANGENT;\r\nvarying mat3 vTBN;\r\n\r\nvec3 getTangent() {\r\n  vec3 tan = TANGENT.xyz;\r\n\r\n#ifdef USE_MORPH\r\n  tan += getTargetTangent();\r\n#endif\r\n#ifdef USE_SKIN\r\n  tan = mat3(getSkinMatrix()) * tan;\r\n#endif\r\n\r\n  return normalize(tan);\r\n}\r\n#else\r\nvarying vec3 vNormal;\r\n#endif\r\n\r\nvec3 getNormal() {\r\n  vec3 norm = NORMAL;\r\n\r\n#ifdef USE_MORPH\r\n  norm += getTargetNormal();\r\n#endif\r\n#ifdef USE_SKIN\r\n  norm = mat3(getSkinMatrix()) * norm;\r\n#endif\r\n\r\n  return normalize(norm);\r\n}\r\n\r\n#endif\r\n\r\nvoid main(void) {\r\n  vec4 pos = model * getPosition();\r\n  vPosition = pos.xyz / pos.w;\r\n\r\n#ifdef USE_NORMAL\r\n#ifdef USE_TANGENT\r\n  vec3 tan = getTangent();\r\n  vec3 normW = normalize(normalMatrix * getNormal());\r\n  vec3 tanW = normalize(normalMatrix * tan);\r\n  vec3 bitanW = cross(normW, tanW) * TANGENT.w;\r\n  vTBN = mat3(tanW, bitanW, normW);\r\n#else\r\n  vNormal = normalize(normalMatrix * NORMAL);\r\n#endif\r\n#endif\r\n\r\n#ifdef USE_COLOR_0\r\n#if defined(COLOR_0_VEC3)\r\n  vColor0 = vec4(COLOR_0, 1.0);\r\n#else\r\n  vColor0 = COLOR_0;\r\n#endif\r\n#endif\r\n\r\n  vTexCoord0 = vec2(0.0, 0.0);\r\n  vTexCoord1 = vec2(0.0, 0.0);\r\n#ifdef USE_TEXCOORD_0\r\n  vTexCoord0 = TEXCOORD_0;\r\n#endif\r\n#ifdef USE_TEXCOORD_1\r\n  vTexCoord1 = TEXCOORD_1;\r\n#endif\r\n\r\n  gl_Position = viewProj * pos;\r\n  gl_PointSize = 1.0;\r\n}\r\n`;\r\n"],"file":"primitive.vert.js"}