{"version":3,"sources":["../../../src/js/gl2/buffer.ts"],"names":["BufferType","Usage","GLBuffer","constructor","context","props","gl","type","Vertex","usage","Static","size","bindBuffer","glb","createBuffer","bufferData","data","offset","bufferSubData","destroy","deleteBuffer"],"mappings":"OAA6CA,U,CAAkBC,K,6BAG/D,MAAO,MAAMC,CAAAA,QAA8B,CAMlCC,WAAW,CAACC,OAAD,CAA6BC,KAA7B,CAAsD,CACtE,KAAMC,CAAAA,EAAE,CAAG,KAAKA,EAAL,CAAUF,OAAO,CAACE,EAA7B,CACA,KAAKD,KAAL,CAAa,CACXE,IAAI,CAAEF,KAAK,CAACE,IAAN,EAAcP,UAAU,CAACQ,MADpB,CAEXC,KAAK,CAAEJ,KAAK,CAACI,KAAN,EAAeR,KAAK,CAACS,MAFjB,CAGXC,IAAI,CAAEN,KAAK,CAACM,IAHD,CAAb,CAMAL,EAAE,CAACM,UAAH,CAAc,KAAKP,KAAL,CAAWE,IAAzB,CAA+B,KAAKM,GAAL,CAAWP,EAAE,CAACQ,YAAH,EAA1C,EACAR,EAAE,CAACS,UAAH,CAAc,KAAKV,KAAL,CAAWE,IAAzB,CAA+B,KAAKF,KAAL,CAAWM,IAA1C,CAAgD,KAAKN,KAAL,CAAWI,KAA3D,CACD,CAEMO,IAAI,CAACA,IAAD,CAAwBC,MAAY,CAAG,CAAvC,CAAoD,CAC7D,KAAKX,EAAL,CAAQM,UAAR,CAAmB,KAAKP,KAAL,CAAWE,IAA9B,CAAoC,KAAKM,GAAzC,EACA,KAAKP,EAAL,CAAQY,aAAR,CAAsB,KAAKb,KAAL,CAAWE,IAAjC,CAAuCU,MAAvC,CAA+CD,IAA/C,EACA,MAAO,KACR,CAEMG,OAAO,EAAS,CACrB,KAAKb,EAAL,CAAQc,YAAR,CAAqB,KAAKP,GAA1B,EACA,KAAKA,GAAL,CAAW,IACZ,CA3BwC","sourcesContent":["import { BufferDescriptor, BufferProperties, BufferType, Uint, Usage } from '../../common';\r\nimport { GLBuffer as IGLBuffer, GLRenderingDevice } from '../device';\r\n\r\nexport class GLBuffer implements IGLBuffer {\r\n  public readonly props: BufferProperties;\r\n  public glb: WebGLBuffer | null;\r\n\r\n  private readonly gl: WebGLRenderingContext;\r\n\r\n  public constructor(context: GLRenderingDevice, props: BufferDescriptor) {\r\n    const gl = this.gl = context.gl;\r\n    this.props = {\r\n      type: props.type || BufferType.Vertex,\r\n      usage: props.usage || Usage.Static,\r\n      size: props.size\r\n    };\r\n\r\n    gl.bindBuffer(this.props.type, this.glb = gl.createBuffer());\r\n    gl.bufferData(this.props.type, this.props.size, this.props.usage);\r\n  }\r\n\r\n  public data(data: ArrayBufferView, offset: Uint = 0): GLBuffer {\r\n    this.gl.bindBuffer(this.props.type, this.glb);\r\n    this.gl.bufferSubData(this.props.type, offset, data);\r\n    return this;\r\n  }\r\n\r\n  public destroy(): void {\r\n    this.gl.deleteBuffer(this.glb);\r\n    this.glb = null;\r\n  }\r\n}\r\n"],"file":"buffer.js"}